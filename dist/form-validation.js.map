{"version":3,"file":"form-validation.js","sources":["../node_modules/reflect-metadata/Reflect.js","../node_modules/@inversifyjs/common/lib/esm/index.js","../node_modules/@inversifyjs/reflect-metadata-utils/lib/esm/index.js","../node_modules/@inversifyjs/core/lib/esm/index.js","../node_modules/@inversifyjs/container/lib/esm/index.js","../MessageBroker/Subscriber.ts","../MessageBroker/MessageBroker.ts","../FormValidation/DI/ContainerTypes.ts","../MessageBroker/Registries/TransportProviderRegistry.ts","../MessageBroker/Registries/MessageFilterRegistry.ts","../FormValidation/Middleware/FormValidationMiddleware.ts","../FormValidation/Parser/RuleParser.ts","../FormValidation/Utils/Debouncer.ts","../FormValidation/Binders/FormEventBinder.ts","../FormValidation/Dispatchers/ValidatorDispatcher.ts","../FormValidation/Registry/ValidatorRegistry.ts","../MessageBroker/Factory/HttpClient.ts","../MessageBroker/Factory/HttpClientFactory.ts","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/v4.js","../MessageBroker/Transports/WebSocketTransport.ts","../FormValidation/DI/container-config.ts","../MessageBroker/Transports/InMemoryTransport.ts","../MessageBroker/Middleware/logLiveSubscribersMiddleware.ts","../FormValidation/Binders/UIBinder.ts","../FormValidation/Validators/RequiredFieldValidator.ts","../FormValidation/Validators/EmailValidator.ts","../FormValidation/Validators/MinLengthValidator.ts","../FormValidation/Validators/MaxLengthValidator.ts","../FormValidation/Validators/MatchValidator.ts","../FormValidation/Validators/RemoteValidator.ts","../FormValidation/Utils/FormDebugger.ts","../FormValidation/Startup/startup.ts"],"sourcesContent":["/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof globalThis === \"object\" ? globalThis :\n            typeof global === \"object\" ? global :\n                typeof self === \"object\" ? self :\n                    typeof this === \"object\" ? this :\n                        sloppyModeThis();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect !== \"undefined\") {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter, root);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                if (previous)\n                    previous(key, value);\n            };\n        }\n        function functionThis() {\n            try {\n                return Function(\"return this;\")();\n            }\n            catch (_) { }\n        }\n        function indirectEvalThis() {\n            try {\n                return (void 0, eval)(\"(function() { return this; })()\");\n            }\n            catch (_) { }\n        }\n        function sloppyModeThis() {\n            return functionThis() || indirectEvalThis();\n        }\n    })(function (exporter, root) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var _Map = typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        var registrySymbol = supportsSymbol ? Symbol.for(\"@reflect-metadata:registry\") : undefined;\n        var metadataRegistry = GetOrCreateMetadataRegistry();\n        var metadataProvider = CreateMetadataProvider(metadataRegistry);\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var provider = GetMetadataProvider(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return provider.OrdinaryDeleteMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return ToBoolean(provider.OrdinaryHasOwnMetadata(MetadataKey, O, P));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return;\n            return provider.OrdinaryGetOwnMetadata(MetadataKey, O, P);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ true);\n            provider.OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var provider = GetMetadataProvider(O, P, /*create*/ false);\n            if (!provider) {\n                return [];\n            }\n            return provider.OrdinaryOwnMetadataKeys(O, P);\n        }\n        // 6 ECMAScript Data Types and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        function SameValueZero(x, y) {\n            return x === y || x !== x && y !== y;\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // Global metadata registry\n        // - Allows `import \"reflect-metadata\"` and `import \"reflect-metadata/no-conflict\"` to interoperate.\n        // - Uses isolated metadata if `Reflect` is frozen before the registry can be installed.\n        /**\n         * Creates a registry used to allow multiple `reflect-metadata` providers.\n         */\n        function CreateMetadataRegistry() {\n            var fallback;\n            if (!IsUndefined(registrySymbol) &&\n                typeof root.Reflect !== \"undefined\" &&\n                !(registrySymbol in root.Reflect) &&\n                typeof root.Reflect.defineMetadata === \"function\") {\n                // interoperate with older version of `reflect-metadata` that did not support a registry.\n                fallback = CreateFallbackProvider(root.Reflect);\n            }\n            var first;\n            var second;\n            var rest;\n            var targetProviderMap = new _WeakMap();\n            var registry = {\n                registerProvider: registerProvider,\n                getProvider: getProvider,\n                setProvider: setProvider,\n            };\n            return registry;\n            function registerProvider(provider) {\n                if (!Object.isExtensible(registry)) {\n                    throw new Error(\"Cannot add provider to a frozen registry.\");\n                }\n                switch (true) {\n                    case fallback === provider: break;\n                    case IsUndefined(first):\n                        first = provider;\n                        break;\n                    case first === provider: break;\n                    case IsUndefined(second):\n                        second = provider;\n                        break;\n                    case second === provider: break;\n                    default:\n                        if (rest === undefined)\n                            rest = new _Set();\n                        rest.add(provider);\n                        break;\n                }\n            }\n            function getProviderNoCache(O, P) {\n                if (!IsUndefined(first)) {\n                    if (first.isProviderFor(O, P))\n                        return first;\n                    if (!IsUndefined(second)) {\n                        if (second.isProviderFor(O, P))\n                            return first;\n                        if (!IsUndefined(rest)) {\n                            var iterator = GetIterator(rest);\n                            while (true) {\n                                var next = IteratorStep(iterator);\n                                if (!next) {\n                                    return undefined;\n                                }\n                                var provider = IteratorValue(next);\n                                if (provider.isProviderFor(O, P)) {\n                                    IteratorClose(iterator);\n                                    return provider;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!IsUndefined(fallback) && fallback.isProviderFor(O, P)) {\n                    return fallback;\n                }\n                return undefined;\n            }\n            function getProvider(O, P) {\n                var providerMap = targetProviderMap.get(O);\n                var provider;\n                if (!IsUndefined(providerMap)) {\n                    provider = providerMap.get(P);\n                }\n                if (!IsUndefined(provider)) {\n                    return provider;\n                }\n                provider = getProviderNoCache(O, P);\n                if (!IsUndefined(provider)) {\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return provider;\n            }\n            function hasProvider(provider) {\n                if (IsUndefined(provider))\n                    throw new TypeError();\n                return first === provider || second === provider || !IsUndefined(rest) && rest.has(provider);\n            }\n            function setProvider(O, P, provider) {\n                if (!hasProvider(provider)) {\n                    throw new Error(\"Metadata provider not registered.\");\n                }\n                var existingProvider = getProvider(O, P);\n                if (existingProvider !== provider) {\n                    if (!IsUndefined(existingProvider)) {\n                        return false;\n                    }\n                    var providerMap = targetProviderMap.get(O);\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return true;\n            }\n        }\n        /**\n         * Gets or creates the shared registry of metadata providers.\n         */\n        function GetOrCreateMetadataRegistry() {\n            var metadataRegistry;\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                metadataRegistry = root.Reflect[registrySymbol];\n            }\n            if (IsUndefined(metadataRegistry)) {\n                metadataRegistry = CreateMetadataRegistry();\n            }\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                Object.defineProperty(root.Reflect, registrySymbol, {\n                    enumerable: false,\n                    configurable: false,\n                    writable: false,\n                    value: metadataRegistry\n                });\n            }\n            return metadataRegistry;\n        }\n        function CreateMetadataProvider(registry) {\n            // [[Metadata]] internal slot\n            // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n            var metadata = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var targetMetadata = metadata.get(O);\n                    if (IsUndefined(targetMetadata))\n                        return false;\n                    return targetMetadata.has(P);\n                },\n                OrdinaryDefineOwnMetadata: OrdinaryDefineOwnMetadata,\n                OrdinaryHasOwnMetadata: OrdinaryHasOwnMetadata,\n                OrdinaryGetOwnMetadata: OrdinaryGetOwnMetadata,\n                OrdinaryOwnMetadataKeys: OrdinaryOwnMetadataKeys,\n                OrdinaryDeleteMetadata: OrdinaryDeleteMetadata,\n            };\n            metadataRegistry.registerProvider(provider);\n            return provider;\n            function GetOrCreateMetadataMap(O, P, Create) {\n                var targetMetadata = metadata.get(O);\n                var createdTargetMetadata = false;\n                if (IsUndefined(targetMetadata)) {\n                    if (!Create)\n                        return undefined;\n                    targetMetadata = new _Map();\n                    metadata.set(O, targetMetadata);\n                    createdTargetMetadata = true;\n                }\n                var metadataMap = targetMetadata.get(P);\n                if (IsUndefined(metadataMap)) {\n                    if (!Create)\n                        return undefined;\n                    metadataMap = new _Map();\n                    targetMetadata.set(P, metadataMap);\n                    if (!registry.setProvider(O, P, provider)) {\n                        targetMetadata.delete(P);\n                        if (createdTargetMetadata) {\n                            metadata.delete(O);\n                        }\n                        throw new Error(\"Wrong provider for target.\");\n                    }\n                }\n                return metadataMap;\n            }\n            // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n            function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                return ToBoolean(metadataMap.has(MetadataKey));\n            }\n            // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n            function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return undefined;\n                return metadataMap.get(MetadataKey);\n            }\n            // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n            function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n                metadataMap.set(MetadataKey, MetadataValue);\n            }\n            // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n            function OrdinaryOwnMetadataKeys(O, P) {\n                var keys = [];\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return keys;\n                var keysObj = metadataMap.keys();\n                var iterator = GetIterator(keysObj);\n                var k = 0;\n                while (true) {\n                    var next = IteratorStep(iterator);\n                    if (!next) {\n                        keys.length = k;\n                        return keys;\n                    }\n                    var nextValue = IteratorValue(next);\n                    try {\n                        keys[k] = nextValue;\n                    }\n                    catch (e) {\n                        try {\n                            IteratorClose(iterator);\n                        }\n                        finally {\n                            throw e;\n                        }\n                    }\n                    k++;\n                }\n            }\n            function OrdinaryDeleteMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                if (!metadataMap.delete(MetadataKey))\n                    return false;\n                if (metadataMap.size === 0) {\n                    var targetMetadata = metadata.get(O);\n                    if (!IsUndefined(targetMetadata)) {\n                        targetMetadata.delete(P);\n                        if (targetMetadata.size === 0) {\n                            metadata.delete(targetMetadata);\n                        }\n                    }\n                }\n                return true;\n            }\n        }\n        function CreateFallbackProvider(reflect) {\n            var defineMetadata = reflect.defineMetadata, hasOwnMetadata = reflect.hasOwnMetadata, getOwnMetadata = reflect.getOwnMetadata, getOwnMetadataKeys = reflect.getOwnMetadataKeys, deleteMetadata = reflect.deleteMetadata;\n            var metadataOwner = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var metadataPropertySet = metadataOwner.get(O);\n                    if (!IsUndefined(metadataPropertySet) && metadataPropertySet.has(P)) {\n                        return true;\n                    }\n                    if (getOwnMetadataKeys(O, P).length) {\n                        if (IsUndefined(metadataPropertySet)) {\n                            metadataPropertySet = new _Set();\n                            metadataOwner.set(O, metadataPropertySet);\n                        }\n                        metadataPropertySet.add(P);\n                        return true;\n                    }\n                    return false;\n                },\n                OrdinaryDefineOwnMetadata: defineMetadata,\n                OrdinaryHasOwnMetadata: hasOwnMetadata,\n                OrdinaryGetOwnMetadata: getOwnMetadata,\n                OrdinaryOwnMetadataKeys: getOwnMetadataKeys,\n                OrdinaryDeleteMetadata: deleteMetadata,\n            };\n            return provider;\n        }\n        /**\n         * Gets the metadata provider for an object. If the object has no metadata provider and this is for a create operation,\n         * then this module's metadata provider is assigned to the object.\n         */\n        function GetMetadataProvider(O, P, Create) {\n            var registeredProvider = metadataRegistry.getProvider(O, P);\n            if (!IsUndefined(registeredProvider)) {\n                return registeredProvider;\n            }\n            if (Create) {\n                if (metadataRegistry.setProvider(O, P, metadataProvider)) {\n                    return metadataProvider;\n                }\n                throw new Error(\"Illegal state.\");\n            }\n            return undefined;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            var Map = /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (SameValueZero(key, this._cacheKey)) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (!SameValueZero(this._cacheKey, key)) {\n                        this._cacheIndex = -1;\n                        for (var i = 0; i < this._keys.length; i++) {\n                            if (SameValueZero(this._keys[i], key)) {\n                                this._cacheIndex = i;\n                                break;\n                            }\n                        }\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            return Map;\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            var Set = /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.keys(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n            return Set;\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    var array = new Uint8Array(size);\n                    if (typeof crypto !== \"undefined\") {\n                        crypto.getRandomValues(array);\n                    }\n                    else if (typeof msCrypto !== \"undefined\") {\n                        msCrypto.getRandomValues(array);\n                    }\n                    else {\n                        FillRandomBytes(array, size);\n                    }\n                    return array;\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","function e(e){return(\"object\"==typeof e&&null!==e||\"function\"==typeof e)&&\"function\"==typeof e.then}function t(e){switch(typeof e){case\"string\":case\"symbol\":return e.toString();case\"function\":return e.name;default:throw new Error(`Unexpected ${typeof e} service id type`)}}const n=Symbol.for(\"@inversifyjs/common/islazyServiceIdentifier\");class r{[n];#e;constructor(e){this.#e=e,this[n]=!0}static is(e){return\"object\"==typeof e&&null!==e&&!0===e[n]}unwrap(){return this.#e()}}export{r as LazyServiceIdentifier,e as isPromise,t as stringifyServiceIdentifier};\n//# sourceMappingURL=index.js.map\n","function t(t,e){return Reflect.getOwnMetadata(e,t)}function e(t,e){return Reflect.getMetadata(e,t)}function n(t,e,n){Reflect.defineMetadata(e,n,t)}function a(e,n,a,f){const c=f(t(e,n)??a());Reflect.defineMetadata(n,c,e)}function f(t,n,a,f){const c=f(e(t,n)??a());Reflect.defineMetadata(n,c,t)}export{t as getOwnReflectMetadata,e as getReflectMetadata,n as setReflectMetadata,a as updateOwnReflectMetadata,f as updateReflectMetadata};\n//# sourceMappingURL=index.js.map\n","import{getOwnReflectMetadata as e,updateOwnReflectMetadata as t,setReflectMetadata as n}from\"@inversifyjs/reflect-metadata-utils\";import{getBaseType as i}from\"@inversifyjs/prototype-utils\";import{stringifyServiceIdentifier as o,LazyServiceIdentifier as r,isPromise as a}from\"@inversifyjs/common\";const s={Request:\"Request\",Singleton:\"Singleton\",Transient:\"Transient\"},c={ConstantValue:\"ConstantValue\",DynamicValue:\"DynamicValue\",Factory:\"Factory\",Instance:\"Instance\",Provider:\"Provider\",ResolvedValue:\"ResolvedValue\",ServiceRedirection:\"ServiceRedirection\"};function*u(...e){for(const t of e)yield*t}class d{#e;#t;#n;constructor(e){this.#e=new Map,this.#t={};for(const t of Reflect.ownKeys(e))this.#t[t]=new Map;this.#n=e}add(e,t){this.#i(e).push(t);for(const n of Reflect.ownKeys(t))this.#o(n,t[n]).push(e)}clone(){const e=Reflect.ownKeys(this.#n),t=new d(this.#n);this.#r(this.#e,t.#e);for(const n of e)this.#r(this.#t[n],t.#t[n]);return t}get(e,t){return this.#t[e].get(t)}getAllKeys(e){return this.#t[e].keys()}removeByRelation(e,t){const n=this.get(e,t);if(void 0===n)return;const i=new Set(n);for(const n of i){const i=this.#e.get(n);if(void 0===i)throw new Error(\"Expecting model relation, none found\");for(const o of i)o[e]===t&&this.#a(n,o);this.#e.delete(n)}}#i(e){let t=this.#e.get(e);return void 0===t&&(t=[],this.#e.set(e,t)),t}#o(e,t){let n=this.#t[e].get(t);return void 0===n&&(n=[],this.#t[e].set(t,n)),n}#r(e,t){for(const[n,i]of e)t.set(n,[...i])}#a(e,t){for(const n of Reflect.ownKeys(t))this.#s(e,n,t[n])}#s(e,t,n){const i=this.#t[t].get(n);if(void 0!==i){const o=i.indexOf(e);-1!==o&&i.splice(o,1),0===i.length&&this.#t[t].delete(n)}}}var l,p,f;!function(e){e.moduleId=\"moduleId\",e.serviceId=\"serviceId\"}(l||(l={}));class g{#c;#u;constructor(e,t){this.#c=t??new d({moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#u=e}static build(e){return new g(e)}add(e,t){this.#c.add(e,t)}clone(){return new g(this.#u,this.#c.clone())}get(e){const t=[],n=this.#c.get(l.serviceId,e);void 0!==n&&t.push(n);const i=this.#u?.get(e);if(void 0!==i&&t.push(i),0!==t.length)return u(...t)}removeAllByModuleId(e){this.#c.removeByRelation(l.moduleId,e)}removeAllByServiceId(e){this.#c.removeByRelation(l.serviceId,e)}}!function(e){e.moduleId=\"moduleId\",e.serviceId=\"serviceId\"}(p||(p={}));class m{#d;#u;constructor(e,t){this.#d=t??new d({moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#u=e}static build(e){return new m(e)}clone(){return new m(this.#u,this.#d.clone())}get(e){return this.getNonParentBindings(e)??this.#u?.get(e)}getNonParentBindings(e){return this.#d.get(p.serviceId,e)}getNonParentBoundServices(){return this.#d.getAllKeys(p.serviceId)}getByModuleId(e){return this.#d.get(p.moduleId,e)??this.#u?.getByModuleId(e)}removeAllByModuleId(e){this.#d.removeByRelation(p.moduleId,e)}removeAllByServiceId(e){this.#d.removeByRelation(p.serviceId,e)}set(e){const t={[p.serviceId]:e.serviceIdentifier};void 0!==e.moduleId&&(t[p.moduleId]=e.moduleId),this.#d.add(e,t)}}!function(e){e.moduleId=\"moduleId\",e.serviceId=\"serviceId\"}(f||(f={}));class h{#l;#u;constructor(e,t){this.#l=t??new d({moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#u=e}static build(e){return new h(e)}add(e,t){this.#l.add(e,t)}clone(){return new h(this.#u,this.#l.clone())}get(e){const t=[],n=this.#l.get(f.serviceId,e);void 0!==n&&t.push(n);const i=this.#u?.get(e);if(void 0!==i&&t.push(i),0!==t.length)return u(...t)}removeAllByModuleId(e){this.#l.removeByRelation(f.moduleId,e)}removeAllByServiceId(e){this.#l.removeByRelation(f.serviceId,e)}}function v(e,t,n){const i=Array.isArray(e)?e:[e];if(void 0!==n)if(\"number\"!=typeof n)Reflect.decorate(i,t.prototype,n);else for(const e of i)e(t,void 0,n);else Reflect.decorate(i,t)}const y=\"@inversifyjs/core/classMetadataReflectKey\";function M(){return{constructorArguments:[],lifecycle:{postConstructMethodName:void 0,preDestroyMethodName:void 0},properties:new Map,scope:void 0}}const I=\"@inversifyjs/core/pendingClassMetadataCountReflectKey\";const w=Symbol.for(\"@inversifyjs/core/InversifyCoreError\");class b extends Error{[w];kind;constructor(e,t,n){super(t,n),this[w]=!0,this.kind=e}static is(e){return\"object\"==typeof e&&null!==e&&!0===e[w]}static isErrorOfKind(e,t){return b.is(e)&&e.kind===t}}var j,T,C;function S(t){const n=e(t,y)??M();if(!function(t){const n=e(t,I);return void 0!==n&&0!==n}(t))return function(e,t){const n=[];if(t.length<e.length)throw new b(j.missingInjectionDecorator,`Found unexpected missing metadata on type \"${e.name}\". \"${e.name}\" constructor requires at least ${e.length.toString()} arguments, found ${t.length.toString()} instead.\\nAre you using @inject, @multiInject or @unmanaged decorators in every non optional constructor argument?\\n\\nIf you're using typescript and want to rely on auto injection, set \"emitDecoratorMetadata\" compiler option to true`);for(let e=0;e<t.length;++e)void 0===t[e]&&n.push(e);if(n.length>0)throw new b(j.missingInjectionDecorator,`Found unexpected missing metadata on type \"${e.name}\" at constructor indexes \"${n.join('\", \"')}\".\\n\\nAre you using @inject, @multiInject or @unmanaged decorators at those indexes?\\n\\nIf you're using typescript and want to rely on auto injection, set \"emitDecoratorMetadata\" compiler option to true`)}(t,n.constructorArguments),n;!function(e,t){const n=[];for(let i=0;i<t.constructorArguments.length;++i){const o=t.constructorArguments[i];void 0!==o&&o.kind!==T.unknown||n.push(`  - Missing or incomplete metadata for type \"${e.name}\" at constructor argument with index ${i.toString()}.\\nEvery constructor parameter must be decorated either with @inject, @multiInject or @unmanaged decorator.`)}for(const[i,o]of t.properties)o.kind===T.unknown&&n.push(`  - Missing or incomplete metadata for type \"${e.name}\" at property \"${i.toString()}\".\\nThis property must be decorated either with @inject or @multiInject decorator.`);if(0===n.length)throw new b(j.unknown,`Unexpected class metadata for type \"${e.name}\" with uncompletion traces.\\nThis might be caused by one of the following reasons:\\n\\n1. A third party library is targeting inversify reflection metadata.\\n2. A bug is causing the issue. Consider submiting an issue to fix it.`);throw new b(j.missingInjectionDecorator,`Invalid class metadata at type ${e.name}:\\n\\n${n.join(\"\\n\\n\")}`)}(t,n)}function A(){return 0}function $(e){return n=>{void 0!==n&&n.kind===T.unknown&&t(e,I,A,(e=>e-1))}}function x(e,t){return(...n)=>i=>{if(void 0===i)return e(...n);if(i.kind===C.unmanaged)throw new b(j.injectionDecoratorConflict,\"Unexpected injection found. Multiple @inject, @multiInject or @unmanaged decorators found\");return t(i,...n)}}function B(e){if(e.kind!==T.unknown&&!0!==e.isFromTypescriptParamType)throw new b(j.injectionDecoratorConflict,\"Unexpected injection found. Multiple @inject, @multiInject or @unmanaged decorators found\")}!function(e){e[e.injectionDecoratorConflict=0]=\"injectionDecoratorConflict\",e[e.missingInjectionDecorator=1]=\"missingInjectionDecorator\",e[e.planning=2]=\"planning\",e[e.resolution=3]=\"resolution\",e[e.unknown=4]=\"unknown\"}(j||(j={})),function(e){e[e.unknown=32]=\"unknown\"}(T||(T={})),function(e){e[e.multipleInjection=0]=\"multipleInjection\",e[e.singleInjection=1]=\"singleInjection\",e[e.unmanaged=2]=\"unmanaged\"}(C||(C={}));const R=x((function(e,t){return{kind:e,name:void 0,optional:!1,tags:new Map,value:t}}),(function(e,t,n){return B(e),{...e,kind:t,value:n}}));function k(e,t){return n=>{const i=n.properties.get(t);return n.properties.set(t,e(i)),n}}var P;function D(e,t,n,i){if(b.isErrorOfKind(i,j.injectionDecoratorConflict)){const o=function(e,t,n){if(void 0===n){if(void 0===t)throw new b(j.unknown,\"Unexpected undefined property and index values\");return{kind:P.property,property:t,targetClass:e.constructor}}return\"number\"==typeof n?{index:n,kind:P.parameter,targetClass:e}:{kind:P.method,method:t,targetClass:e}}(e,t,n);throw new b(j.injectionDecoratorConflict,`Unexpected injection error.\\n\\nCause:\\n\\n${i.message}\\n\\nDetails\\n\\n${function(e){switch(e.kind){case P.method:return`[class: \"${e.targetClass.name}\", method: \"${e.method.toString()}\"]`;case P.parameter:return`[class: \"${e.targetClass.name}\", index: \"${e.index.toString()}\"]`;case P.property:return`[class: \"${e.targetClass.name}\", property: \"${e.property.toString()}\"]`}}(o)}`,{cause:i})}throw i}function V(e,n){return(i,o,r)=>{try{void 0===r?function(e,n){const i=F(e,n);return(e,n)=>{t(e.constructor,y,M,k(i(e),n))}}(e,n)(i,o):\"number\"==typeof r?function(e,n){const i=F(e,n);return(e,n,o)=>{if(!function(e,t){return\"function\"==typeof e&&void 0===t}(e,n))throw new b(j.injectionDecoratorConflict,`Found an @inject decorator in a non constructor parameter.\\nFound @inject decorator at method \"${n?.toString()??\"\"}\" at class \"${e.constructor.name}\"`);t(e,y,M,function(e,t){return n=>{const i=n.constructorArguments[t];return n.constructorArguments[t]=e(i),n}}(i(e),o))}}(e,n)(i,o,r):function(e,n){const i=F(e,n);return(e,n,o)=>{if(!function(e){return void 0!==e.set}(o))throw new b(j.injectionDecoratorConflict,`Found an @inject decorator in a non setter property method.\\nFound @inject decorator at method \"${n.toString()}\" at class \"${e.constructor.name}\"`);t(e.constructor,y,M,k(i(e),n))}}(e,n)(i,o,r)}catch(e){D(i,o,r,e)}}}function F(e,t){return n=>{const i=t(n);return t=>(i(t),e(t))}}function O(e){return V(R(C.singleInjection,e),$)}!function(e){e[e.method=0]=\"method\",e[e.parameter=1]=\"parameter\",e[e.property=2]=\"property\"}(P||(P={}));const N=\"@inversifyjs/core/classIsInjectableFlagReflectKey\";const E=[Array,BigInt,Boolean,Function,Number,Object,String];function U(n){const i=e(n,\"design:paramtypes\");void 0!==i&&t(n,y,M,function(e){return t=>(e.forEach(((e,n)=>{var i;void 0!==t.constructorArguments[n]||(i=e,E.includes(i))||(t.constructorArguments[n]=function(e){return{isFromTypescriptParamType:!0,kind:C.singleInjection,name:void 0,optional:!1,tags:new Map,value:e}}(e))})),t)}(i))}function K(i){return o=>{!function(t){if(void 0!==e(t,N))throw new b(j.injectionDecoratorConflict,`Cannot apply @injectable decorator multiple times at class \"${t.name}\"`);n(t,N,!0)}(o),U(o),void 0!==i&&t(o,y,M,(e=>({...e,scope:i})))}}function q(e,t,n){let i;return e.extendConstructorArguments??!0?(i=[...t.constructorArguments],n.constructorArguments.map(((e,t)=>{i[t]=e}))):i=n.constructorArguments,i}function z(e,t,n){let i;return i=e.extendProperties??!0?new Map(u(t.properties,n.properties)):n.properties,i}function G(e){return n=>{const i=S(e.type);t(n,y,M,function(e,t){const n=n=>({constructorArguments:q(e,t,n),lifecycle:n.lifecycle,properties:z(e,t,n),scope:n.scope});return n}(e,i))}}function H(e){return t=>{const n=i(t);if(void 0===n)throw new b(j.injectionDecoratorConflict,`Expected base type for type \"${t.name}\", none found.`);G({...e,type:n})(t)}}function J(e){return V(R(C.multipleInjection,e),$)}function L(e){return n=>{void 0===n&&t(e,I,A,(e=>e+1))}}function Q(e){return t=>{const n=t??{kind:T.unknown,name:void 0,optional:!1,tags:new Map};if(n.kind===C.unmanaged)throw new b(j.injectionDecoratorConflict,\"Unexpected injection found. Found @unmanaged injection with additional @named, @optional, @tagged or @targetName injections\");return e(n)}}function W(e){const t=Q(function(e){return t=>{if(void 0!==t.name)throw new b(j.injectionDecoratorConflict,\"Unexpected duplicated named decorator\");return t.name=e,t}}(e));return V(t,L)}function X(e){if(e.optional)throw new b(j.injectionDecoratorConflict,\"Unexpected duplicated optional decorator\");return e.optional=!0,e}function Y(){return V(Q(X),L)}function Z(){return(e,n,i)=>{try{t(e.constructor,y,M,(o=n,e=>{if(void 0!==e.lifecycle.postConstructMethodName)throw new b(j.injectionDecoratorConflict,\"Unexpected duplicated postConstruct decorator\");return e.lifecycle.postConstructMethodName=o,e}))}catch(t){D(e,n,void 0,t)}var o}}function _(){return(e,n,i)=>{try{t(e.constructor,y,M,(o=n,e=>{if(void 0!==e.lifecycle.preDestroyMethodName)throw new b(j.injectionDecoratorConflict,\"Unexpected duplicated preDestroy decorator\");return e.lifecycle.preDestroyMethodName=o,e}))}catch(t){D(e,n,void 0,t)}var o}}function ee(e,t){const n=Q(function(e,t){return n=>{if(n.tags.has(e))throw new b(j.injectionDecoratorConflict,\"Unexpected duplicated tag decorator with existing tag\");return n.tags.set(e,t),n}}(e,t));return V(n,L)}function te(){return{kind:C.unmanaged}}const ne=x(te,(function(e){if(B(e),function(e){return void 0!==e.name||e.optional||e.tags.size>0}(e))throw new b(j.injectionDecoratorConflict,\"Unexpected injection found. Found @unmanaged injection with additional @named, @optional, @tagged or @targetName injections\");return te()}));function ie(){return V(ne(),$)}var oe;!function(e){e[e.multipleInjection=0]=\"multipleInjection\",e[e.singleInjection=1]=\"singleInjection\"}(oe||(oe={}));class re{#p;constructor(e){this.#p=e}get name(){return this.#p.elem.name}get serviceIdentifier(){return this.#p.elem.serviceIdentifier}get tags(){return this.#p.elem.tags}getAncestor(){if(void 0!==this.#p.previous)return new re(this.#p.previous)}}class ae{last;constructor(e){this.last=e}concat(e){return new ae({elem:e,previous:this.last})}[Symbol.iterator](){let e=this.last;return{next:()=>{if(void 0===e)return{done:!0,value:void 0};const t=e.elem;return e=e.previous,{done:!1,value:t}}}}}function se(e,t){e.servicesBranch.has(t)&&function(e,t){const n=(i=[...e.servicesBranch,t],[...i].map(o).join(\" -> \"));var i;throw new b(j.planning,`Circular dependency found: ${n}`)}(e,t),e.servicesBranch.add(t)}function ce(e,t,n){const i=n?.customServiceIdentifier??t.serviceIdentifier,o=[...e.getBindings(i)??[]].filter((e=>e.isSatisfiedBy(t)));if(0===o.length&&void 0!==e.autobindOptions&&\"function\"==typeof i){const t=function(e,t){return{cache:{isRight:!1,value:void 0},id:0,implementationType:t,isSatisfiedBy:()=>!0,moduleId:void 0,onActivation:void 0,onDeactivation:void 0,scope:e.scope,serviceIdentifier:t,type:c.Instance}}(e.autobindOptions,i);e.setBinding(t),o.push(t)}return o}function ue(e){return void 0!==e.redirections}function de(e,t,n,i){let r,a;ue(n)?(r=n.binding.targetServiceIdentifier,a=n.binding.serviceIdentifier):(r=n.serviceIdentifier,a=n.parent?.binding.serviceIdentifier),Array.isArray(e)?function(e,t,n,i,r){if(0!==e.length){const t=`Ambiguous bindings found for service: \"${o(n)}\".\\n\\nRegistered bindings:\\n\\n${e.map((e=>function(e){switch(e.type){case c.Instance:return`[ type: \"${e.type}\", serviceIdentifier: \"${o(e.serviceIdentifier)}\", scope: \"${e.scope}\", implementationType: \"${e.implementationType.name}\" ]`;case c.ServiceRedirection:return`[ type: \"${e.type}\", serviceIdentifier: \"${o(e.serviceIdentifier)}\", redirection: \"${o(e.targetServiceIdentifier)}\" ]`;default:return`[ type: \"${e.type}\", serviceIdentifier: \"${o(e.serviceIdentifier)}\", scope: \"${e.scope}\" ]`}}(e.binding))).join(\"\\n\")}\\n\\nTrying to resolve bindings for \"${pe(n,i)}\".\\n\\n${fe(r)}`;throw new b(j.planning,t)}t||le(n,i,r)}(e,t,r,a,i):function(e,t,n,i,o){if(void 0!==e||t)return;le(n,i,o)}(e,t,r,a,i)}function le(e,t,n){const i=`No bindings found for service: \"${o(e)}\".\\n\\nTrying to resolve bindings for \"${pe(e,t)}\".\\n\\n${fe(n)}`;throw new b(j.planning,i)}function pe(e,t){return void 0===t?`${o(e)} (Root service)`:o(t)}function fe(e){const t=0===e.tags.size?\"\":`\\n- tags:\\n  - ${[...e.tags.keys()].map((e=>e.toString())).join(\"\\n  - \")}`;return`Binding constraints:\\n- service identifier: ${o(e.serviceIdentifier)}\\n- name: ${e.name?.toString()??\"-\"}${t}`}function ge(e,t,n){if(1!==e.redirections.length)de(e.redirections,t,e,n);else{const[i]=e.redirections;ue(i)&&ge(i,t,n)}}function me(e,t,n){if(Array.isArray(e.bindings)&&1===e.bindings.length){const[i]=e.bindings;ue(i)&&ge(i,t,n)}else de(e.bindings,t,e,n)}function he(e){const t=new Map;void 0!==e.rootConstraints.tag&&t.set(e.rootConstraints.tag.key,e.rootConstraints.tag.value);const n=new ae({elem:{name:e.rootConstraints.name,serviceIdentifier:e.rootConstraints.serviceIdentifier,tags:t},previous:void 0}),i=new re(n.last),o=ce(e,i),r=[],a={bindings:r,parent:void 0,serviceIdentifier:e.rootConstraints.serviceIdentifier};if(r.push(...we(e,n,o,a)),!e.rootConstraints.isMultiple){me(a,e.rootConstraints.isOptional??!1,i);const[t]=r;a.bindings=t}return{tree:{root:a}}}function ve(e,t,n,i){const o={binding:t,classMetadata:e.getClassMetadata(t.implementationType),constructorParams:[],parent:i,propertyParams:new Map};return je({autobindOptions:e.autobindOptions,getBindings:e.getBindings,getClassMetadata:e.getClassMetadata,node:o,servicesBranch:e.servicesBranch,setBinding:e.setBinding},n)}function ye(e,t,n){if(n.kind===C.unmanaged)return;const i=r.is(n.value)?n.value.unwrap():n.value,o=t.concat({name:n.name,serviceIdentifier:i,tags:n.tags}),a=new re(o.last),s=ce(e,a),c=[],u={bindings:c,parent:e.node,serviceIdentifier:i};if(c.push(...we(e,o,s,u)),n.kind===C.singleInjection){me(u,n.optional,a);const[e]=c;u.bindings=e}return u}function Me(e,t,n){const i=r.is(n.value)?n.value.unwrap():n.value,o=t.concat({name:n.name,serviceIdentifier:i,tags:n.tags}),a=new re(o.last),s=ce(e,a),c=[],u={bindings:c,parent:e.node,serviceIdentifier:i};if(c.push(...we(e,o,s,u)),n.kind===oe.singleInjection){me(u,n.optional,a);const[e]=c;u.bindings=e}return u}function Ie(e,t,n,i){const o={binding:t,params:[],parent:i};return je({autobindOptions:e.autobindOptions,getBindings:e.getBindings,getClassMetadata:e.getClassMetadata,node:o,servicesBranch:e.servicesBranch,setBinding:e.setBinding},n)}function we(e,t,n,i){const o=ue(i)?i.binding.targetServiceIdentifier:i.serviceIdentifier;se(e,o);const r=[];for(const o of n)switch(o.type){case c.Instance:r.push(ve(e,o,t,i));break;case c.ResolvedValue:r.push(Ie(e,o,t,i));break;case c.ServiceRedirection:{const n=be(e,t,o,i);r.push(n);break}default:r.push({binding:o,parent:i})}return e.servicesBranch.delete(o),r}function be(e,t,n,i){const o={binding:n,parent:i,redirections:[]},r=ce(e,new re(t.last),{customServiceIdentifier:n.targetServiceIdentifier});return o.redirections.push(...we(e,t,r,o)),o}function je(e,t){return e.node.binding.type===c.Instance?function(e,t,n){const i=t.classMetadata;for(const[o,r]of i.constructorArguments.entries())t.constructorParams[o]=ye(e,n,r);for(const[o,r]of i.properties){const i=ye(e,n,r);void 0!==i&&t.propertyParams.set(o,i)}return e.node}(e,e.node,t):function(e,t,n){const i=t.binding.metadata;for(const[o,r]of i.arguments.entries())t.params[o]=Me(e,n,r);return e.node}(e,e.node,t)}var Te;!function(e){e[e.singleMandatory=0]=\"singleMandatory\",e[e.singleOptional=1]=\"singleOptional\",e[e.multipleMandatory=2]=\"multipleMandatory\",e[e.multipleOptional=3]=\"multipleOptional\",e[e.length=4]=\"length\"}(Te||(Te={}));class Ce{#f;#g;#m;#h;#v;constructor(){this.#f=this.#y(),this.#g=this.#y(),this.#h=this.#y(),this.#m=this.#y(),this.#v=[]}clearCache(){for(const e of this.#M())e.clear();for(const e of this.#v)e.clearCache()}get(e){return void 0===e.name?void 0===e.tag?this.#I(this.#f,e).get(e.serviceIdentifier):this.#I(this.#m,e).get(e.serviceIdentifier)?.get(e.tag.key)?.get(e.tag.value):void 0===e.tag?this.#I(this.#g,e).get(e.serviceIdentifier)?.get(e.name):this.#I(this.#h,e).get(e.serviceIdentifier)?.get(e.name)?.get(e.tag.key)?.get(e.tag.value)}set(e,t){void 0===e.name?void 0===e.tag?this.#I(this.#f,e).set(e.serviceIdentifier,t):this.#w(this.#w(this.#I(this.#m,e),e.serviceIdentifier),e.tag.key).set(e.tag.value,t):void 0===e.tag?this.#w(this.#I(this.#g,e),e.serviceIdentifier).set(e.name,t):this.#w(this.#w(this.#w(this.#I(this.#h,e),e.serviceIdentifier),e.name),e.tag.key).set(e.tag.value,t)}subscribe(e){this.#v.push(e)}#y(){const e=new Array(Te.length);for(let t=0;t<e.length;++t)e[t]=new Map;return e}#w(e,t){let n=e.get(t);return void 0===n&&(n=new Map,e.set(t,n)),n}#I(e,t){return e[this.#b(t)]}#M(){return[...this.#f,...this.#g,...this.#h,...this.#m]}#b(e){return e.isMultiple?!0===e.optional?Te.multipleOptional:Te.multipleMandatory:!0===e.optional?Te.singleOptional:Te.singleMandatory}}function Se(e,t){return a(t)?t.then((t=>Ae(e,t))):Ae(e,t)}function Ae(e,t){return e.cache={isRight:!0,value:t},t}function $e(e,t,n){const i=e.getActivations(t);return void 0===i?n:a(n)?xe(e,n,i[Symbol.iterator]()):function(e,t,n){let i=t,o=n.next();for(;!0!==o.done;){const t=o.value(e.context,i);if(a(t))return xe(e,t,n);i=t,o=n.next()}return i}(e,n,i[Symbol.iterator]())}async function xe(e,t,n){let i=await t,o=n.next();for(;!0!==o.done;)i=await o.value(e.context,i),o=n.next();return i}function Be(e,t,n){let i=n;if(void 0!==t.onActivation){const n=t.onActivation;i=a(i)?i.then((t=>n(e.context,t))):n(e.context,i)}return $e(e,t.serviceIdentifier,i)}function Re(e){return(t,n)=>{if(n.cache.isRight)return n.cache.value;return Se(n,Be(t,n,e(t,n)))}}const ke=Re((function(e,t){return t.value}));function Pe(e){return e}function De(e,t){return(n,i)=>{const o=e(i);switch(o.scope){case s.Singleton:if(o.cache.isRight)return o.cache.value;return Se(o,Be(n,o,t(n,i)));case s.Request:{if(n.requestScopeCache.has(o.id))return n.requestScopeCache.get(o.id);const e=Be(n,o,t(n,i));return n.requestScopeCache.set(o.id,e),e}case s.Transient:return Be(n,o,t(n,i))}}}const Ve=(e=>De(Pe,e))((function(e,t){return t.value(e.context)}));const Fe=Re((function(e,t){return t.factory(e.context)}));function Oe(e,t,n){const i=function(e,t,n){if(void 0===n)return;if(!(n in e))throw new b(j.resolution,`Expecting a \"${n.toString()}\" property when resolving \"${t.implementationType.name}\" class @postConstruct decorated method, none found.`);if(\"function\"!=typeof e[n])throw new b(j.resolution,`Expecting a \"${n.toString()}\" method when resolving \"${t.implementationType.name}\" class @postConstruct decorated method, a non function property was found instead.`);{let i;try{i=e[n]()}catch(e){throw new b(j.resolution,`Unexpected error found when calling \"${n.toString()}\" @postConstruct decorated method on class \"${t.implementationType.name}\"`,{cause:e})}if(a(i))return async function(e,t,n){try{await n}catch(n){throw new b(j.resolution,`Unexpected error found when calling \"${t.toString()}\" @postConstruct decorated method on class \"${e.implementationType.name}\"`,{cause:n})}}(t,n,i)}}(e,t,n);return a(i)?i.then((()=>e)):e}function Ne(e){return(t,n,i)=>{const o=new i.binding.implementationType(...t),r=e(n,o,i);return a(r)?r.then((()=>Oe(o,i.binding,i.classMetadata.lifecycle.postConstructMethodName))):Oe(o,i.binding,i.classMetadata.lifecycle.postConstructMethodName)}}const Ee=Re((function(e,t){return t.provider(e.context)}));function Ue(e){return e.binding}function Ke(e){return e.binding}const qe=function(e){return(t,n,i)=>{const o=[];for(const[r,s]of i.propertyParams){const c=i.classMetadata.properties.get(r);if(void 0===c)throw new b(j.resolution,`Expecting metadata at property \"${r.toString()}\", none found`);c.kind!==C.unmanaged&&void 0!==s.bindings&&(n[r]=e(t,s),a(n[r])&&o.push((async()=>{n[r]=await n[r]})()))}if(o.length>0)return Promise.all(o).then((()=>{}))}}(Xe),ze=function(e){return function t(n,i){const o=[];for(const r of i.redirections)ue(r)?o.push(...t(n,r)):o.push(e(n,r));return o}}(We),Ge=function(e,t,n){return(i,o)=>{const r=e(i,o);return a(r)?t(r,i,o):n(r,i,o)}}(function(e){return(t,n)=>{const i=[];for(const o of n.constructorParams)void 0===o?i.push(void 0):i.push(e(t,o));return i.some(a)?Promise.all(i):i}}(Xe),function(e){return async(t,n,i)=>{const o=await t;return e(o,n,i)}}(Ne(qe)),Ne(qe)),He=function(e){return(t,n)=>{const i=e(t,n);return a(i)?i.then((e=>n.binding.factory(...e))):n.binding.factory(...i)}}(function(e){return(t,n)=>{const i=[];for(const o of n.params)i.push(e(t,o));return i.some(a)?Promise.all(i):i}}(Xe)),Je=(e=>De(Ue,e))(Ge),Le=(e=>De(Ke,e))(He);function Qe(e){return Xe(e,e.planResult.tree.root)}function We(e,t){switch(t.binding.type){case c.ConstantValue:return ke(e,t.binding);case c.DynamicValue:return Ve(e,t.binding);case c.Factory:return Fe(e,t.binding);case c.Instance:return Je(e,t);case c.Provider:return Ee(e,t.binding);case c.ResolvedValue:return Le(e,t)}}function Xe(e,t){if(void 0!==t.bindings)return Array.isArray(t.bindings)?function(e,t){const n=[];for(const i of t)ue(i)?n.push(...ze(e,i)):n.push(We(e,i));if(n.some(a))return Promise.all(n);return n}(e,t.bindings):function(e,t){if(ue(t)){const n=ze(e,t);if(1===n.length)return n[0];throw new b(j.resolution,\"Unexpected multiple resolved values on single injection\")}return We(e,t)}(e,t.bindings)}function Ye(e){return void 0!==e.scope}function Ze(e,t){if(void 0!==e.lifecycle.preDestroyMethodName&&\"function\"==typeof t[e.lifecycle.preDestroyMethodName])return t[e.lifecycle.preDestroyMethodName]()}function _e(e,t,n){const i=e.getDeactivations(t);if(void 0!==i)return a(n)?et(n,i[Symbol.iterator]()):function(e,t){let n=t.next();for(;!0!==n.done;){const i=n.value(e);if(a(i))return et(e,t);n=t.next()}}(n,i[Symbol.iterator]())}async function et(e,t){const n=await e;let i=t.next();for(;!0!==i.done;)await i.value(n),i=t.next()}function tt(e,t){const n=function(e,t){if(t.type===c.Instance){const n=e.getClassMetadata(t.implementationType),i=t.cache.value;return a(i)?i.then((e=>Ze(n,e))):Ze(n,i)}}(e,t);return void 0===n?nt(e,t):n.then((()=>nt(e,t)))}function nt(e,t){const n=t.cache;return a(n.value)?n.value.then((n=>it(e,t,n))):it(e,t,n.value)}function it(e,t,n){let i;if(void 0!==t.onDeactivation){i=(0,t.onDeactivation)(n)}return void 0===i?_e(e,t.serviceIdentifier,n):i.then((()=>_e(e,t.serviceIdentifier,n)))}function ot(e,t){if(void 0===t)return;const n=function(e){const t=[];for(const n of e)Ye(n)&&n.scope===s.Singleton&&n.cache.isRight&&t.push(n);return t}(t),i=[];for(const t of n){const n=tt(e,t);void 0!==n&&i.push(n)}return i.length>0?Promise.all(i).then((()=>{})):void 0}function rt(e,t){const n=e.getBindingsFromModule(t);return ot(e,n)}function at(e,t){const n=e.getBindings(t);return ot(e,n)}export{g as ActivationsService,m as BindingService,C as ClassElementMetadataKind,h as DeactivationsService,Ce as PlanResultCacheService,oe as ResolvedValueElementMetadataKind,s as bindingScopeValues,c as bindingTypeValues,v as decorate,S as getClassMetadata,O as inject,H as injectFromBase,K as injectable,J as multiInject,W as named,Y as optional,he as plan,Z as postConstruct,_ as preDestroy,Qe as resolve,rt as resolveModuleDeactivations,at as resolveServiceDeactivations,ee as tagged,ie as unmanaged};\n//# sourceMappingURL=index.js.map\n","import\"reflect-metadata\";import{getOwnReflectMetadata as i,setReflectMetadata as e,updateOwnReflectMetadata as t}from\"@inversifyjs/reflect-metadata-utils\";import{LazyServiceIdentifier as n,isPromise as s,stringifyServiceIdentifier as a}from\"@inversifyjs/common\";import{getClassMetadata as o,bindingTypeValues as r,bindingScopeValues as c,ResolvedValueElementMetadataKind as d,PlanResultCacheService as l,ActivationsService as u,BindingService as h,DeactivationsService as v,resolveServiceDeactivations as g,resolveModuleDeactivations as b,plan as S,resolve as p}from\"@inversifyjs/core\";const f=\"@inversifyjs/container/bindingId\";class m{#i;#e;constructor(n){this.#i=function(){const n=i(Object,f)??0;return n===Number.MAX_SAFE_INTEGER?e(Object,f,Number.MIN_SAFE_INTEGER):t(Object,f,(()=>n),(i=>i+1)),n}(),this.#e=n}get id(){return this.#i}async load(i){await this.#e(i)}}class y{static always=i=>!0}const w=\"@inversifyjs/container/bindingId\";function I(){const n=i(Object,w)??0;return n===Number.MAX_SAFE_INTEGER?e(Object,w,Number.MIN_SAFE_INTEGER):t(Object,w,(()=>n),(i=>i+1)),n}function A(i){return e=>{for(let t=e.getAncestor();void 0!==t;t=t.getAncestor())if(i(t))return!0;return!1}}function P(i){return e=>e.name===i}function R(i){return e=>e.serviceIdentifier===i}function B(i,e){return t=>t.tags.has(i)&&t.tags.get(i)===e}function C(i){return void 0===i.name&&0===i.tags.size}function M(i){const e=A(i);return i=>!e(i)}function N(i){return e=>{const t=e.getAncestor();return void 0===t||!i(t)}}function x(i){return e=>{const t=e.getAncestor();return void 0!==t&&i(t)}}class O{#t;constructor(i){this.#t=i}inRequestScope(){return this.#t.scope=c.Request,new j(this.#t)}inSingletonScope(){return this.#t.scope=c.Singleton,new j(this.#t)}inTransientScope(){return this.#t.scope=c.Transient,new j(this.#t)}}class F{#n;#s;#a;#o;constructor(i,e,t,n){this.#n=i,this.#s=e,this.#a=t,this.#o=n}to(i){const e=o(i),t={cache:{isRight:!1,value:void 0},id:I(),implementationType:i,isSatisfiedBy:y.always,moduleId:this.#s,onActivation:void 0,onDeactivation:void 0,scope:e.scope??this.#a,serviceIdentifier:this.#o,type:r.Instance};return this.#n(t),new E(t)}toSelf(){if(\"function\"!=typeof this.#o)throw new Error('\"toSelf\" function can only be applied when a newable function is used as service identifier');return this.to(this.#o)}toConstantValue(i){const e={cache:{isRight:!1,value:void 0},id:I(),isSatisfiedBy:y.always,moduleId:this.#s,onActivation:void 0,onDeactivation:void 0,scope:c.Singleton,serviceIdentifier:this.#o,type:r.ConstantValue,value:i};return this.#n(e),new j(e)}toDynamicValue(i){const e={cache:{isRight:!1,value:void 0},id:I(),isSatisfiedBy:y.always,moduleId:this.#s,onActivation:void 0,onDeactivation:void 0,scope:this.#a,serviceIdentifier:this.#o,type:r.DynamicValue,value:i};return this.#n(e),new E(e)}toResolvedValue(i,e){const t={cache:{isRight:!1,value:void 0},factory:i,id:I(),isSatisfiedBy:y.always,metadata:this.#r(e),moduleId:this.#s,onActivation:void 0,onDeactivation:void 0,scope:this.#a,serviceIdentifier:this.#o,type:r.ResolvedValue};return this.#n(t),new E(t)}toFactory(i){const e={cache:{isRight:!1,value:void 0},factory:i,id:I(),isSatisfiedBy:y.always,moduleId:this.#s,onActivation:void 0,onDeactivation:void 0,scope:c.Singleton,serviceIdentifier:this.#o,type:r.Factory};return this.#n(e),new j(e)}toProvider(i){const e={cache:{isRight:!1,value:void 0},id:I(),isSatisfiedBy:y.always,moduleId:this.#s,onActivation:void 0,onDeactivation:void 0,provider:i,scope:c.Singleton,serviceIdentifier:this.#o,type:r.Provider};return this.#n(e),new j(e)}toService(i){const e={id:I(),isSatisfiedBy:y.always,moduleId:this.#s,serviceIdentifier:this.#o,targetServiceIdentifier:i,type:r.ServiceRedirection};this.#n(e)}#r(i){return{arguments:(i??[]).map((i=>function(i){return\"object\"==typeof i&&!n.is(i)}(i)?{kind:!0===i.isMultiple?d.multipleInjection:d.singleInjection,name:i.name,optional:i.optional??!1,tags:new Map((i.tags??[]).map((i=>[i.key,i.value]))),value:i.serviceIdentifier}:{kind:d.singleInjection,name:void 0,optional:!1,tags:new Map,value:i}))}}}class D{#t;constructor(i){this.#t=i}onActivation(i){return this.#t.onActivation=i,new k(this.#t)}onDeactivation(i){return this.#t.onDeactivation=i,new k(this.#t)}}class k{#t;constructor(i){this.#t=i}when(i){return this.#t.isSatisfiedBy=i,new D(this.#t)}whenAnyAncestor(i){return this.when(A(i))}whenAnyAncestorIs(i){return this.when(A(R(i)))}whenAnyAncestorNamed(i){return this.when(function(i){return A(P(i))}(i))}whenAnyAncestorTagged(i,e){return this.when(function(i,e){return A(B(i,e))}(i,e))}whenDefault(){return this.when(C)}whenNamed(i){return this.when(P(i))}whenNoParent(i){return this.when(N(i))}whenNoParentIs(i){return this.when(N(R(i)))}whenNoParentNamed(i){return this.when(function(i){return N(P(i))}(i))}whenNoParentTagged(i,e){return this.when(function(i,e){return N(B(i,e))}(i,e))}whenParent(i){return this.when(x(i))}whenParentIs(i){return this.when(x(R(i)))}whenParentNamed(i){return this.when(function(i){return x(P(i))}(i))}whenParentTagged(i,e){return this.when(function(i,e){return x(B(i,e))}(i,e))}whenTagged(i,e){return this.when(B(i,e))}whenNoAncestor(i){return this.when(M(i))}whenNoAncestorIs(i){return this.when(M(R(i)))}whenNoAncestorNamed(i){return this.when(function(i){return M(P(i))}(i))}whenNoAncestorTagged(i,e){return this.when(function(i,e){return M(B(i,e))}(i,e))}}class j extends k{#c;constructor(i){super(i),this.#c=new D(i)}onActivation(i){return this.#c.onActivation(i)}onDeactivation(i){return this.#c.onDeactivation(i)}}class E extends j{#d;constructor(i){super(i),this.#d=new O(i)}inRequestScope(){return this.#d.inRequestScope()}inSingletonScope(){return this.#d.inSingletonScope()}inTransientScope(){return this.#d.inTransientScope()}}const T=Symbol.for(\"@inversifyjs/container/InversifyContainerError\");class V extends Error{[T];kind;constructor(i,e,t){super(e,t),this[T]=!0,this.kind=i}static is(i){return\"object\"==typeof i&&null!==i&&!0===i[T]}static isErrorOfKind(i,e){return V.is(i)&&i.kind===e}}var _;!function(i){i[i.invalidOperation=0]=\"invalidOperation\"}(_||(_={}));const G=c.Transient;class q{#l;#u;#h;#v;#g;#b;#S;#p;#f;#m;constructor(i){this.#v=i=>this.#l.get(i),this.#S=new l,this.#p=this.#y(),void 0===i?.parent?(this.#l=u.build(void 0),this.#u=h.build(void 0),this.#h=v.build(void 0)):(this.#l=u.build(i.parent.#l),this.#u=h.build(i.parent.#u),this.#h=v.build(i.parent.#h),i.parent.#S.subscribe(this.#S)),this.#g=this.#u.get.bind(this.#u),this.#f=this.#w.bind(this),this.#b={autobind:i?.autobind??!1,defaultScope:i?.defaultScope??G},this.#m=[]}bind(i){return new F((i=>{this.#w(i)}),void 0,this.#b.defaultScope,i)}get(i,e){const t=this.#I(!1,i,e),n=this.#A(t);if(s(n))throw new V(_.invalidOperation,`Unexpected asyncronous service when resolving service \"${a(i)}\"`);return n}getAll(i,e){const t=this.#I(!0,i,e),n=this.#A(t);if(s(n))throw new V(_.invalidOperation,`Unexpected asyncronous service when resolving service \"${a(i)}\"`);return n}async getAllAsync(i,e){const t=this.#I(!0,i,e);return this.#A(t)}async getAsync(i,e){const t=this.#I(!1,i,e);return this.#A(t)}isBound(i,e){const t=this.#u.get(i);return this.#P(i,t,e)}isCurrentBound(i,e){const t=this.#u.getNonParentBindings(i);return this.#P(i,t,e)}async load(...i){await Promise.all(i.map((async i=>i.load(this.#R(i.id)))))}onActivation(i,e){this.#l.add(e,{serviceId:i})}onDeactivation(i,e){this.#h.add(e,{serviceId:i})}restore(){const i=this.#m.pop();if(void 0===i)throw new V(_.invalidOperation,\"No snapshot available to restore\");this.#l=i.activationService,this.#u=i.bindingService,this.#h=i.deactivationService,this.#B()}snapshot(){this.#m.push({activationService:this.#l.clone(),bindingService:this.#u.clone(),deactivationService:this.#h.clone()})}async unbind(i){await g(this.#C(),i),this.#l.removeAllByServiceId(i),this.#u.removeAllByServiceId(i),this.#h.removeAllByServiceId(i),this.#S.clearCache()}async unbindAll(){const i=this.#C(),e=[...this.#u.getNonParentBoundServices()];await Promise.all(e.map((async e=>g(i,e))));for(const i of e)this.#l.removeAllByServiceId(i),this.#u.removeAllByServiceId(i),this.#h.removeAllByServiceId(i);this.#S.clearCache()}async unload(...i){const e=this.#C();await Promise.all(i.map((i=>b(e,i.id))));for(const e of i)this.#l.removeAllByModuleId(e.id),this.#u.removeAllByModuleId(e.id),this.#h.removeAllByModuleId(e.id);this.#S.clearCache()}#R(i){return{bind:e=>new F((i=>{this.#w(i)}),i,this.#b.defaultScope,e),isBound:this.isBound.bind(this),onActivation:(e,t)=>{this.#l.add(t,{moduleId:i,serviceId:e})},onDeactivation:(e,t)=>{this.#h.add(t,{moduleId:i,serviceId:e})},unbind:this.unbind.bind(this)}}#C(){return{getBindings:i=>this.#u.get(i),getBindingsFromModule:i=>this.#u.getByModuleId(i),getClassMetadata:o,getDeactivations:i=>this.#h.get(i)}}#M(i,e,t){return{isMultiple:i,name:t?.name,optional:t?.optional,serviceIdentifier:e,tag:t?.tag}}#N(i,e,t){const n={autobindOptions:t?.autobind??this.#b.autobind?{scope:this.#b.defaultScope}:void 0,getBindings:this.#g,getClassMetadata:o,rootConstraints:{isMultiple:i,serviceIdentifier:e},servicesBranch:new Set,setBinding:this.#f};return this.#x(n,t),n}#I(i,e,t){const n=this.#M(i,e,t),s=this.#S.get(n);if(void 0!==s)return s;const a=S(this.#N(i,e,t));return this.#S.set(n,a),a}#y(){return{get:this.get.bind(this),getAll:this.getAll.bind(this),getAllAsync:this.getAllAsync.bind(this),getAsync:this.getAsync.bind(this)}}#A(i){return p({context:this.#p,getActivations:this.#v,planResult:i,requestScopeCache:new Map})}#x(i,e){void 0!==e&&(void 0!==e.name&&(i.rootConstraints.name=e.name),!0===e.optional&&(i.rootConstraints.isOptional=!0),void 0!==e.tag&&(i.rootConstraints.tag={key:e.tag.key,value:e.tag.value}))}#P(i,e,t){if(void 0===e)return!1;const n={getAncestor:()=>{},name:t?.name,serviceIdentifier:i,tags:new Map};void 0!==t?.tag&&n.tags.set(t.tag.key,t.tag.value);for(const i of e)if(i.isSatisfiedBy(n))return!0;return!1}#B(){this.#S.clearCache(),this.#v=i=>this.#l.get(i),this.#g=this.#u.get.bind(this.#u),this.#p=this.#y(),this.#f=this.#w.bind(this)}#w(i){this.#u.set(i),this.#S.clearCache()}}export{q as Container,m as ContainerModule,V as InversifyContainerError,_ as InversifyContainerErrorKind};\n//# sourceMappingURL=index.js.map\n","import { MessageFilter, MessageHandler } from \"../TYPES\";\r\nimport { ISubscriber } from \"./Interfaces/ISubscriber\";\r\n\r\n\r\n/**\r\n * Simple Subscriber class for tracking subscriptions.\r\n * Pass this as the return value from broker.subscribe().\r\n */\r\nexport class Subscriber implements ISubscriber {\r\n  constructor(\r\n    public handler: MessageHandler,\r\n    public filter?: MessageFilter,\r\n    public owner?: any\r\n  ) {}\r\n}","import { inject, injectable, optional } from \"inversify\";\r\nimport { Subscriber } from \"./Subscriber\";\r\nimport { ITransportProvider } from \"./Interfaces/ITransportProvider\";\r\nimport { IMessage } from \"./Interfaces/IMessage\";\r\nimport { IMessageBroker } from \"./Interfaces/IMessageBroker\";\r\nimport { BrokerErrorHandler } from \"./Types\";\r\nimport { MessageFilter, MessageHandler } from \"../TYPES\";\r\n\r\n@injectable()\r\nexport class MessageBroker implements IMessageBroker {\r\n  private subscribers: Set<Subscriber> = new Set();\r\n  private errorHandler?: BrokerErrorHandler;\r\n  private handlerTimeoutMs = 8000;\r\n  private provider?: ITransportProvider;\r\n  public readonly clientId: string | undefined;\r\n\r\n  // Middleware and replay support\r\n  private middlewares: ((\r\n    msg: IMessage,\r\n    next: (msg: IMessage) => void\r\n  ) => void)[] = [];\r\n  private lastMessages: Map<string, IMessage> = new Map();\r\n\r\n  public metrics: IBrokerMetrics = {\r\n    published: 0,\r\n    delivered: 0,\r\n    errors: 0,\r\n    lastError: null as any,\r\n    lastPublishTime: 0,\r\n  };\r\n\r\n  constructor() {}\r\n  public getSubscribersByType(type: string): readonly Subscriber[] {\r\n    return Array.from(this.subscribers).filter((sub) => {\r\n      // If a filter exists, test it against a mock message with the given type\r\n      if (typeof sub.filter === \"function\") {\r\n        try {\r\n          return sub.filter({ type } as IMessage);\r\n        } catch {\r\n          return false;\r\n        }\r\n      }\r\n      // If no filter, assume accepts all\r\n      return true;\r\n    });\r\n  }\r\n  public getSubscribersByTopic(topic: string): readonly Subscriber[] {\r\n    return Array.from(this.subscribers).filter((sub) => {\r\n      if (typeof sub.filter === \"function\") {\r\n        try {\r\n          return sub.filter({ topic } as IMessage);\r\n        } catch {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    });\r\n  }\r\n\r\n  get connectionId(): string | undefined {\r\n    return this.provider && \"connectionId\" in this.provider\r\n      ? (this.provider as any).connectionId\r\n      : undefined;\r\n  }\r\n\r\n  setProvider(provider: ITransportProvider) {\r\n    this.provider = provider;\r\n  }\r\n\r\n  async start(): Promise<void> {\r\n    if (!this.provider) {\r\n      console.warn(\r\n        \"[BROKER] No transport provider set. Broker will only dispatch locally.\"\r\n      );\r\n      return;\r\n    }\r\n    await this.provider.connect?.();\r\n    this.provider.onMessage?.(this.handleTransportMessage.bind(this));\r\n    console.log(\r\n      `[BROKER] Started with transport '${this.provider.name}' at '${this.provider.endpoint}'`\r\n    );\r\n  }\r\n\r\n  async stop(): Promise<void> {\r\n    this.unsubscribeAll();\r\n    if (this.provider?.disconnect) {\r\n      await this.provider.disconnect();\r\n    }\r\n    console.log(\"[BROKER] Shutdown complete.\");\r\n  }\r\n\r\n  async request<TResponse = any>(\r\n    msg: IMessage,\r\n    timeout = 8000\r\n  ): Promise<TResponse> {\r\n    if (!this.provider || typeof this.provider.sendRequest !== \"function\") {\r\n      throw new Error(\"Transport provider does not support request/reply\");\r\n    }\r\n    return await this.provider.sendRequest<TResponse>(msg, timeout);\r\n  }\r\n\r\n  setErrorHandler(handler: BrokerErrorHandler) {\r\n    this.errorHandler = handler;\r\n  }\r\n\r\n  // logLiveSubscribers(label = \"\"): void {\r\n  //   console.log(label, \"Live subscribers:\", this.subscribers.size);\r\n  //   let i = 1;\r\n  //   for (const sub of this.subscribers) {\r\n  //     console.log(`${i++}.`, sub);\r\n  //   }\r\n  // }\r\n\r\n  /**\r\n   * Returns a read-only array of all current subscribers.\r\n   * Useful for introspection, diagnostics, or middleware.\r\n   */\r\n  public getSubscribers(): readonly Subscriber[] {\r\n    // Convert Set to Array for safe external usage\r\n    return Array.from(this.subscribers);\r\n  }\r\n\r\n  // Defensive duplicate detection\r\n  subscribe(\r\n    handler: MessageHandler,\r\n    filter?: MessageFilter,\r\n    owner?: any\r\n  ): Subscriber {\r\n    for (const sub of this.subscribers) {\r\n      if (\r\n        sub.handler === handler &&\r\n        sub.filter === filter &&\r\n        sub.owner === owner\r\n      ) {\r\n        console.warn(\"[BROKER] Duplicate subscription prevented.\", {\r\n          handler,\r\n          filter,\r\n          owner,\r\n        });\r\n        return sub;\r\n      }\r\n    }\r\n    if (!handler || typeof handler !== \"function\") {\r\n      console.warn(\"[BROKER] Tried to subscribe with missing handler\");\r\n      throw new Error(\"Handler is required for subscription\");\r\n    }\r\n    const subscriber = new Subscriber(handler, filter, owner);\r\n    this.subscribers.add(subscriber);\r\n    console.log(\"[BROKER] Subscribed:\", { handler, filter, owner });\r\n    return subscriber;\r\n  }\r\n\r\n  unsubscribe(subscriber: Subscriber): void {\r\n    if (this.subscribers.delete(subscriber)) {\r\n      console.log(\"[BROKER] Unsubscribed:\", subscriber);\r\n    }\r\n  }\r\n\r\n  unsubscribeByOwner(owner: any): void {\r\n    for (const sub of Array.from(this.subscribers)) {\r\n      if (sub.owner === owner) {\r\n        this.subscribers.delete(sub);\r\n        console.log(\"[BROKER] Unsubscribed by owner:\", owner);\r\n      }\r\n    }\r\n  }\r\n\r\n  unsubscribeAll(): void {\r\n    this.subscribers.clear();\r\n    console.log(\"[BROKER] All subscribers cleared\");\r\n  }\r\n\r\n  use(middleware: (msg: IMessage, next: (msg: IMessage) => void) => void) {\r\n    this.middlewares.push(middleware);\r\n  }\r\n\r\n  subscribeOnce(\r\n    handler: MessageHandler,\r\n    filter?: MessageFilter,\r\n    owner?: any\r\n  ): Subscriber {\r\n    let sub: Subscriber;\r\n    const onceHandler = (msg: IMessage) => {\r\n      handler(msg);\r\n      this.unsubscribe(sub);\r\n    };\r\n    sub = this.subscribe(onceHandler, filter, owner);\r\n    return sub;\r\n  }\r\n\r\n  replayLast(topic: string, handler: MessageHandler) {\r\n    const msg = this.lastMessages.get(topic);\r\n    if (msg) handler(msg);\r\n    else\r\n      console.log(`[BROKER] No message found for topic '${topic}' to replay.`);\r\n  }\r\n\r\n  // --- Timeout utility ---\r\n  private timeoutPromise<T>(\r\n    p: Promise<T>,\r\n    ms: number,\r\n    errMsg: string\r\n  ): Promise<T> {\r\n    return Promise.race([\r\n      p,\r\n      new Promise<T>((_, reject) =>\r\n        setTimeout(() => reject(new Error(errMsg)), ms)\r\n      ),\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * Publish a message to all subscribers and send to transport if set.\r\n   * Returns a Promise that resolves after all local handlers (but does not wait for remote).\r\n   */\r\n  async publish(msg: IMessage): Promise<void> {\r\n    if (!msg) throw new Error(\"Cannot publish undefined/null message!\");\r\n    this.metrics.published++;\r\n    this.metrics.lastPublishTime = Date.now();\r\n    if (msg.type) this.lastMessages.set(msg.type, msg);\r\n\r\n    let idx = 0;\r\n    const run = (m: IMessage) => {\r\n      if (idx < this.middlewares.length) {\r\n        const mw = this.middlewares[idx++];\r\n        try {\r\n          mw(m, run);\r\n        } catch (err) {\r\n          console.error(\"[BROKER] Middleware error:\", err);\r\n          // Continue to next middleware\r\n          run(m);\r\n        }\r\n      } else {\r\n        this._publishCore(m);\r\n      }\r\n    };\r\n    run(msg);\r\n  }\r\n\r\n  // ---- MAIN DELIVERY LOGIC ----\r\n  private async _publishCore(msg: IMessage) {\r\n    if (!msg.from) {\r\n      msg.from = this.connectionId || this.clientId;\r\n    }\r\n    let delivered = 0;\r\n    const promises: Promise<any>[] = [];\r\n    // --- Local delivery ---\r\n    for (const sub of this.subscribers) {\r\n      let matches = true;\r\n      if (typeof sub.filter === \"function\") {\r\n        try {\r\n          matches = await this.timeoutPromise(\r\n            Promise.resolve(sub.filter(msg)),\r\n            this.handlerTimeoutMs,\r\n            \"Filter timed out\"\r\n          );\r\n        } catch (err) {\r\n          matches = false;\r\n          this.metrics.errors++;\r\n          this.metrics.lastError = err;\r\n          console.error(\"[BROKER] Filter error for subscriber:\", sub, err);\r\n        }\r\n      }\r\n      if (matches) {\r\n        try {\r\n          const p = this.timeoutPromise(\r\n            Promise.resolve(sub.handler(msg)),\r\n            this.handlerTimeoutMs,\r\n            \"Handler timed out\"\r\n          ).catch((e) => {\r\n            this.metrics.errors++;\r\n            this.metrics.lastError = e;\r\n            console.error(\"[BROKER] Handler error:\", e, sub);\r\n            try {\r\n              if (this.errorHandler) this.errorHandler(e, msg, sub);\r\n            } catch (handlerErr) {\r\n              console.error(\"[BROKER] Error handler threw:\", handlerErr);\r\n            }\r\n          });\r\n          promises.push(p);\r\n          delivered++;\r\n        } catch (err) {\r\n          this.metrics.errors++;\r\n          this.metrics.lastError = err;\r\n          console.error(\"[BROKER] Handler threw:\", err, sub);\r\n          try {\r\n            if (this.errorHandler) this.errorHandler(err, msg, sub);\r\n          } catch (handlerErr) {\r\n            console.error(\"[BROKER] Error handler threw:\", handlerErr);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.metrics.delivered += delivered;\r\n\r\n    // --- Remote delivery ---\r\n    if (this.provider) {\r\n      try {\r\n        // Defensive: Only send if provider is open (1=OPEN for WebSocket/standard transports)\r\n        if (\r\n          typeof this.provider.readyState === \"number\" &&\r\n          this.provider.readyState !== 1\r\n        ) {\r\n          console.warn(\r\n            \"[BROKER] Transport not open, not sending:\",\r\n            this.provider.name\r\n          );\r\n          return;\r\n        }\r\n        if (typeof this.provider.sendBroadcast === \"function\") {\r\n          await this.provider.sendBroadcast(msg);\r\n        } else if (typeof this.provider.send === \"function\") {\r\n          await this.provider.send(msg.type, msg);\r\n        } else {\r\n          console.warn(\"[BROKER] Transport provider missing send method\");\r\n        }\r\n      } catch (e) {\r\n        this.metrics.errors++;\r\n        this.metrics.lastError = e;\r\n        console.error(\"[BROKER] Transport send error:\", e);\r\n        try {\r\n          if (this.errorHandler) this.errorHandler(e, msg, undefined);\r\n        } catch (handlerErr) {\r\n          console.error(\"[BROKER] Error handler threw:\", handlerErr);\r\n        }\r\n      }\r\n    }\r\n\r\n    await Promise.all(promises);\r\n    console.log(`[BROKER] Delivered to ${delivered} local subscriber(s)`);\r\n  }\r\n\r\n  /**\r\n   * Handle incoming messages from the transport layer.\r\n   * If the message has a \"from\" field equal to this broker, ignore (prevents echo).\r\n   */\r\n  private handleTransportMessage(raw: any) {\r\n    let msg: IMessage;\r\n    try {\r\n      if (typeof raw === \"string\") {\r\n        msg = JSON.parse(raw);\r\n      } else {\r\n        msg = raw;\r\n      }\r\n      // Prevent echo if this broker sent it\r\n      if (\r\n        msg.from &&\r\n        (msg.from === this.connectionId || msg.from === this.clientId)\r\n      )\r\n        return;\r\n      // Do not re-send to transport, just fire to subscribers\r\n      this.fireToSubscribers(msg);\r\n    } catch (e) {\r\n      console.error(\"[BROKER] Failed to handle transport message:\", raw, e);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fires message to all local subscribers, no transport involved.\r\n   */\r\n  private fireToSubscribers(msg: IMessage) {\r\n    for (const sub of this.subscribers) {\r\n      let matches = true;\r\n      if (typeof sub.filter === \"function\") {\r\n        try {\r\n          matches = sub.filter(msg);\r\n        } catch (err) {\r\n          matches = false;\r\n          console.error(\"[BROKER] Filter error for subscriber:\", sub, err);\r\n        }\r\n      }\r\n      if (matches) {\r\n        try {\r\n          Promise.resolve(sub.handler(msg)).catch((e) => {\r\n            if (this.errorHandler) {\r\n              try {\r\n                this.errorHandler(e, msg, sub);\r\n              } catch (handlerErr) {\r\n                console.error(\"[BROKER] Error handler threw:\", handlerErr);\r\n              }\r\n            } else {\r\n              console.error(\"[BROKER] Handler error:\", e, sub);\r\n            }\r\n          });\r\n        } catch (err) {\r\n          if (this.errorHandler) {\r\n            try {\r\n              this.errorHandler(err, msg, sub);\r\n            } catch (handlerErr) {\r\n              console.error(\"[BROKER] Error handler threw:\", handlerErr);\r\n            }\r\n          } else {\r\n            console.error(\"[BROKER] Handler threw:\", err, sub);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  get endpoint(): string | undefined {\r\n    return this.provider?.endpoint;\r\n  }\r\n  get transportName(): string | undefined {\r\n    return this.provider?.name;\r\n  }\r\n}\r\n","\r\nexport const ContainerTypes = {\r\n  MessageBroker: Symbol.for(\"MessageBroker\"),\r\n  MessageFilterRegistry: Symbol.for(\"MessageFilterRegistry\"),\r\n  FormValidationService: Symbol.for(\"FormValidationService\"),\r\n  RealTimeValidationService: Symbol.for(\"RealTimeValidationService\"),\r\n  ValidationManager: Symbol.for(\"ValidationManager\"),\r\n  TransportProviderRegistry: Symbol.for(\"TransportProviderRegistry\"),\r\n  TransportProviderName: Symbol.for(\"TransportProviderName\"),\r\n  EchoLoggerComponent: Symbol.for(\"EchoLoggerComponent\"),\r\n  RuleParser: Symbol.for(\"RuleParser\"),\r\n  FormParsingService: Symbol.for(\"FormParsingService\"),\r\n  ValidatorRegistry: Symbol.for(\"ValidatorRegistry\"),\r\n  HttpClientFactory: Symbol.for(\"HttpClientFactory\"),\r\n  DynamicFormSchemaService: Symbol.for(\"DynamicFormSchemaService\"),\r\n  WebSocketTransportProvider: Symbol.for(\"WebSocketTransportProvider\"),\r\n  FormEventBinder: Symbol.for(\"FormEventBinder\"),\r\n  ValidatorDispatcher: Symbol.for(\"ValidatorDispatcher\"),\r\n  HttpTransportProvider: Symbol.for(\"HttpTransportProvider\"),\r\n  WebSocketTransport: Symbol.for(\"WebSocketTransport\"),\r\n  RequiredValidator: Symbol.for(\"RequiredValidator\"),\r\n  EmailValidator: Symbol.for(\"EmailValidator\"),\r\n  FormLoggerComponent: Symbol.for(\"FormLoggerComponent\"),\r\n  FormValidationMiddleware: Symbol.for(\"FormValidationMiddleware\"),\r\n};\r\nexport default ContainerTypes;\r\n","import { injectable } from \"inversify\";\r\n\r\nimport { ITransportProvider } from \"../Interfaces/ITransportProvider\";\r\nimport { ITransportProviderRegistry } from \"../Interfaces/ITransportProviderRegistry\";\r\n\r\n@injectable()\r\nexport class TransportProviderRegistry implements ITransportProviderRegistry {\r\n  private providers = new Map<string, ITransportProvider>();\r\n\r\n  /** Register (or override) a provider by name */\r\n  register(name: string, provider: ITransportProvider): void {\r\n    if (!name || typeof name !== \"string\" || !name.trim()) {\r\n      throw new Error(\"Provider name must be a non-empty string\");\r\n    }\r\n    if (!provider) throw new Error(\"Provider instance is required\");\r\n    this.providers.set(name, provider);\r\n  }\r\n\r\n  /** Retrieve a provider by name, or undefined */\r\n  get(name: string): ITransportProvider | undefined {\r\n    return this.providers.get(name);\r\n  }\r\n\r\n  /** Remove a provider by name */\r\n  unregister(name: string): void {\r\n    this.providers.delete(name);\r\n  }\r\n\r\n  /** Check if a provider exists */\r\n  has(name: string): boolean {\r\n    return this.providers.has(name);\r\n  }\r\n\r\n  /** List all registered provider names */\r\n  list(): string[] {\r\n    return Array.from(this.providers.keys());\r\n  }\r\n\r\n  /** Remove all providers from the registry */\r\n  clear(): void {\r\n    this.providers.clear();\r\n  }\r\n}\r\n","import { injectable } from \"inversify\";\r\nimport { IMessage } from \"../Interfaces/IMessage\";\r\nimport { MessageFilter } from \"../Types\";\r\nimport { IMessageFilterRegistry } from \"../Interfaces/IMessageFilterRegistry\";\r\n\r\n\r\n@injectable()\r\nexport class MessageFilterRegistry implements IMessageFilterRegistry {\r\n  private filters = new Map<string, MessageFilter>();\r\n\r\n  /** Register (or override) a named filter */\r\n  register(name: string, filter: MessageFilter): void {\r\n    if (!name || typeof name !== \"string\" || !name.trim()) {\r\n      throw new Error(\"Filter name must be a non-empty string\");\r\n    }\r\n    if (typeof filter !== \"function\") {\r\n      throw new Error(\"Filter must be a function\");\r\n    }\r\n    this.filters.set(name, filter);\r\n  }\r\n\r\n  /** Retrieve a filter by name, or undefined if not found */\r\n  get(name: string): MessageFilter | undefined {\r\n    return this.filters.get(name);\r\n  }\r\n\r\n  /** Remove a filter by name */\r\n  unregister(name: string): void {\r\n    this.filters.delete(name);\r\n  }\r\n\r\n  /** Check if a filter exists by name */\r\n  has(name: string): boolean {\r\n    return this.filters.has(name);\r\n  }\r\n\r\n  /** List all registered filter names */\r\n  list(): string[] {\r\n    return Array.from(this.filters.keys());\r\n  }\r\n\r\n  /** Remove all filters from the registry */\r\n  clear(): void {\r\n    this.filters.clear();\r\n  }\r\n}\r\n","import { IMessage } from \"../../MessageBroker/Interfaces/IMessage\";\r\nimport { IMessageBroker } from \"../../MessageBroker/Interfaces/IMessageBroker\";\r\nimport { IFormValidationMiddleware } from \"../Interfaces/IFormValidationMiddleware\";\r\nimport { injectable, inject } from 'inversify';\r\nimport { IRuleParser } from \"../Interfaces/IRuleParser\";\r\nimport { IFieldValidationSchema } from \"../Interfaces/IFieldValidationSchema\";\r\nimport ContainerTypes from \"../DI/ContainerTypes\";\r\nimport { IFormEventBinder } from \"../Interfaces/IFormEventBinder\";\r\n\r\n@injectable()\r\nexport class FormValidationMiddleware implements IFormValidationMiddleware {\r\n  private label: string = \"FormValidation\";\r\n  \r\n  constructor(\r\n    @inject(\"IFormEventBinder\") private formEventBinder: IFormEventBinder\r\n  ) {}\r\n\r\n  /** Scan and bind all forms marked for validation */\r\n  attachToForms(): void {\r\n    const forms = Array.from(document.querySelectorAll<HTMLFormElement>('form[validate=\"true\"]'));\r\n    console.log(`[${this.label}] Attaching to ${forms.length} forms for validation.`);\r\n    if (forms.length === 0) {\r\n      console.warn(`[${this.label}] No forms found with 'validate=\"true\"'.`);\r\n      return;\r\n    }\r\n    forms.forEach(form => this.formEventBinder.bind(form));\r\n  }\r\n\r\n  /* Middleware for broker: logs validation-related messages */\r\n  middleware() {\r\n    return (msg: IMessage, next: (msg: IMessage) => void) => {\r\n      if (\r\n        [\r\n          \"FormSubmit\", \r\n          \"FieldChanged\", \r\n          \"FieldBlurred\", \r\n          \"FieldRemoteValidate\",\r\n          \"FormSubmitted\", \r\n          \"FieldValidationResult\"\r\n        ].includes(msg.type)\r\n      ) {\r\n        console.log(`[${this.label} Middleware] Intercepted:`, msg);\r\n      }\r\n      next(msg);\r\n    };\r\n  }\r\n}","import { injectable } from \"inversify\";\r\nimport { IFieldValidationSchema } from \"../Interfaces/IFieldValidationSchema\";\r\nimport { IRuleDescriptor } from \"../Interfaces/IRuleDescriptor\";\r\nimport { IRuleParser } from \"../Interfaces/IRuleParser\";\r\n\r\n\r\n@injectable()\r\nexport class RuleParser implements IRuleParser {\r\n  parseForm(form: HTMLFormElement): IFieldValidationSchema[] {\r\n    const fields: IFieldValidationSchema[] = [];\r\n    const elements = Array.from(form.elements) as (HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement)[];\r\n    const processed = new Set<string>();\r\n    // Group by name for checkboxes/radios\r\n    const grouped: Record<string, (HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement)[]> = {};\r\n    elements.forEach(el => {\r\n      if (!el.name) return;\r\n      if (!grouped[el.name]) grouped[el.name] = [];\r\n      grouped[el.name].push(el);\r\n    });\r\n    for (const [name, group] of Object.entries(grouped)) {\r\n      if (processed.has(name)) continue;\r\n      const el = group[0];\r\n      let rules: IRuleDescriptor[] = [];\r\n      if (el instanceof HTMLInputElement && (el.type === \"checkbox\" || el.type === \"radio\")) {\r\n        // Aggregate rules for group\r\n        group.forEach(input => {\r\n          rules = rules.concat(this.parseField(input));\r\n        });\r\n        // Remove duplicates by type\r\n        const seen = new Set();\r\n        rules = rules.filter(r => {\r\n          if (seen.has(r.type)) return false;\r\n          seen.add(r.type);\r\n          return true;\r\n        });\r\n      } else {\r\n        rules = this.parseField(el);\r\n      }\r\n      console.log(`[RuleParser] Field: ${name}, Rules:`, rules);\r\n      if (rules.length > 0) fields.push({ field: name, rules });\r\n      processed.add(name);\r\n    }\r\n    return fields;\r\n  }\r\n\r\n  parseField(el: HTMLElement): IRuleDescriptor[] {\r\n    const rules: IRuleDescriptor[] = [];\r\n    const input = el as HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement;\r\n\r\n    // ---- HTML5 rules ----\r\n    if ('required' in input && input.required) rules.push({ type: \"required\" });\r\n    if ('minLength' in input && input.minLength > 0) rules.push({ type: \"minLength\", value: input.minLength });\r\n    if ('maxLength' in input && input.maxLength > 0) rules.push({ type: \"maxLength\", value: input.maxLength });\r\n    if ('pattern' in input && input.pattern) rules.push({ type: \"pattern\", value: input.pattern });\r\n    if ('type' in input && input.type === \"email\") rules.push({ type: \"email\" });\r\n\r\n    // ---- Data attribute rules ----\r\n    Array.from(el.attributes).forEach(attr => {\r\n      if (!attr.name.startsWith(\"data-rule-\")) return;\r\n\r\n      const ruleKey = attr.name.slice(\"data-rule-\".length).toLowerCase();\r\n      // Skip remote (handled below)\r\n      if ([\"remote\", \"remote-provider\", \"remote-endpoint\"].includes(ruleKey)) return;\r\n\r\n      if (ruleKey === \"minchecked\") rules.push({ type: \"minChecked\", value: +attr.value });\r\n      else if (ruleKey === \"minselected\") rules.push({ type: \"minSelected\", value: +attr.value });\r\n      else if (ruleKey === \"match\") {\r\n        // Support data-match-field as a secondary way to specify the field to match\r\n        const matchField = el.getAttribute(\"data-match-field\");\r\n        rules.push({\r\n          type: \"match\",\r\n          value: attr.value,\r\n          ...(matchField ? { matchField } : {})\r\n        });\r\n      }\r\n      // Catch-all for anything else\r\n      else rules.push({ type: ruleKey, value: attr.value });\r\n    });\r\n\r\n    // ---- Remote validation rule ----\r\n    const remoteType = el.getAttribute(\"data-rule-remote\");\r\n    const provider = el.getAttribute(\"data-rule-remote-provider\");\r\n    const endpoint = el.getAttribute(\"data-rule-remote-endpoint\");\r\n    if (remoteType && (provider || endpoint)) {\r\n      rules.push({\r\n        type: \"remote\",\r\n        remoteType,\r\n        provider: provider || undefined,\r\n        endpoint: endpoint || undefined\r\n      });\r\n    }\r\n\r\n    return rules;\r\n  }\r\n}\r\n","import { inject, injectable } from \"inversify\";\r\n\r\n@injectable()\r\nexport class Debouncer {\r\n  private timer: number | null = null;\r\n\r\n  constructor(private delayMs: number) {}\r\n\r\n  run(callback: () => void) {\r\n    if (this.timer) clearTimeout(this.timer);\r\n    this.timer = window.setTimeout(callback, this.delayMs);\r\n  }\r\n\r\n  clear() {\r\n    if (this.timer) clearTimeout(this.timer);\r\n    this.timer = null;\r\n  }\r\n}\r\n","import { IMessageBroker } from \"../../MessageBroker/Interfaces/IMessageBroker\";\r\nimport ContainerTypes from \"../DI/ContainerTypes\";\r\nimport { injectable, inject } from \"inversify\";\r\nimport { IValidatorDispatcher } from \"../Interfaces/IValidatorDispatcher\";\r\nimport { Debouncer } from \"../Utils/Debouncer\";\r\nimport { IMessage } from \"../../MessageBroker/Interfaces/IMessage\";\r\nimport { IFormEventBinder } from \"../Interfaces/IFormEventBinder\";\r\n\r\n@injectable()\r\nexport class FormEventBinder implements IFormEventBinder {\r\n  private fieldDebouncers = new Map<string, Debouncer>();\r\n  private fieldHandlerRefs = new WeakMap<Element, Function[]>();\r\n  private mutationObservers = new WeakMap<HTMLFormElement, MutationObserver>();\r\n  private boundForms = new Set<HTMLFormElement>();\r\n\r\n  constructor(\r\n    @inject(ContainerTypes.MessageBroker) private broker: IMessageBroker,\r\n    @inject(ContainerTypes.ValidatorDispatcher)\r\n    private dispatcher: IValidatorDispatcher\r\n  ) {}\r\n\r\n  public bind(form: HTMLFormElement): void {\r\n    this.bindFields(form);\r\n    this.observeForm(form);\r\n    form.addEventListener(\"submit\", this.onFormSubmit);\r\n    this.boundForms.add(form);\r\n\r\n    this.broker.publish({\r\n      type: \"KeepAliveRequest\",\r\n      topic: \"transport\",\r\n      payload: { formId: form.id },\r\n      _remote: false,\r\n    });\r\n  }\r\n\r\n  public unbind(form: HTMLFormElement): void {\r\n    const observer = this.mutationObservers.get(form);\r\n    if (observer) observer.disconnect();\r\n    this.mutationObservers.delete(form);\r\n\r\n    Array.from(form.elements)\r\n      .filter(this.isBindableField)\r\n      .forEach((field) => {\r\n        const handlers = this.fieldHandlerRefs.get(field) || [];\r\n        [\"change\", \"blur\"].forEach((evt, idx) => {\r\n          if (handlers[idx])\r\n            field.removeEventListener(evt, handlers[idx] as EventListener);\r\n        });\r\n        this.fieldHandlerRefs.delete(field);\r\n      });\r\n\r\n    form.removeEventListener(\"submit\", this.onFormSubmit);\r\n    this.fieldDebouncers.forEach((d) => d.clear());\r\n    this.fieldDebouncers.clear();\r\n    this.boundForms.delete(form);\r\n  }\r\n\r\n  public unbindAll(): void {\r\n    for (const form of this.boundForms) {\r\n      const observer = this.mutationObservers.get(form);\r\n      if (observer) observer.disconnect();\r\n      this.unbind(form);\r\n    }\r\n    this.boundForms.clear();\r\n    this.mutationObservers = new WeakMap();\r\n    this.fieldDebouncers.clear();\r\n    this.fieldHandlerRefs = new WeakMap();\r\n  }\r\n\r\n  private observeForm(form: HTMLFormElement) {\r\n    const observer = new MutationObserver(() => this.bindFields(form));\r\n    observer.observe(form, { childList: true, subtree: true });\r\n    this.mutationObservers.set(form, observer);\r\n  }\r\n\r\n  private bindFields(form: HTMLFormElement) {\r\n    // This can be a good place to publish schema if needed!\r\n    // e.g. const schema = this.buildSchema(form); this.broker.publish({type: \"SchemaDetected\", ...})\r\n\r\n    const fields = Array.from(form.elements).filter(this.isBindableField);\r\n    fields.forEach((field: Element) => {\r\n      if (this.fieldHandlerRefs.has(field)) return;\r\n\r\n      const name = (field as HTMLInputElement).name;\r\n      const isRemote = this.hasRemoteRule(field);\r\n\r\n      const handler = (evt: Event) => {\r\n        this.handleEvent(evt, isRemote);\r\n      };\r\n\r\n      field.addEventListener(\"change\", handler);\r\n      field.addEventListener(\"blur\", handler);\r\n      this.fieldHandlerRefs.set(field, [handler, handler]);\r\n    });\r\n  }\r\n\r\n  private handleEvent(evt: Event, isRemote: boolean): void {\r\n    const field = evt.target as\r\n      | HTMLInputElement\r\n      | HTMLSelectElement\r\n      | HTMLTextAreaElement;\r\n    if (!field || !field.name) return;\r\n\r\n    if (isRemote) {\r\n      let debouncer = this.fieldDebouncers.get(field.name);\r\n      if (!debouncer) {\r\n        debouncer = new Debouncer(350);\r\n        this.fieldDebouncers.set(field.name, debouncer);\r\n      }\r\n      debouncer.run(() => this.onRemoteEvent(evt, field));\r\n    } else {\r\n      this.onLocalEvent(evt, field);\r\n    }\r\n  }\r\n\r\n  private onRemoteEvent(\r\n    evt: Event,\r\n    field: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement\r\n  ) {\r\n    const form = field.form;\r\n    const formId = form?.id || undefined;\r\n    const allValues = this.extractFormValues(form);\r\n\r\n    const msg: IMessage = {\r\n      type: \"FieldRemoteValidate\",\r\n      topic: \"form\",\r\n      payload: {\r\n        formId,\r\n        name: field.name,\r\n        value: this.getFieldValue(field),\r\n        fieldType: field.type,\r\n        remoteType: field.getAttribute(\"data-rule-remote\"),\r\n        provider: field.getAttribute(\"data-rule-remote-provider\"),\r\n        endpoint: field.getAttribute(\"data-rule-remote-endpoint\"),\r\n        allValues,\r\n      },\r\n      _remote: false,\r\n    };\r\n    this.broker.publish(msg);\r\n  }\r\n\r\n  private onLocalEvent(\r\n    evt: Event,\r\n    field: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement\r\n  ) {\r\n    const form = field.form;\r\n    const formId = form?.id || undefined;\r\n    const allValues = this.extractFormValues(form);\r\n\r\n    const msg: IMessage = {\r\n      type: evt.type === \"blur\" ? \"FieldBlurred\" : \"FieldChanged\",\r\n      topic: \"form\",\r\n      payload: {\r\n        formId,\r\n        name: field.name,\r\n        value: this.getFieldValue(field),\r\n        fieldType: field.type,\r\n        allValues,\r\n      },\r\n      _remote: false,\r\n    };\r\n    this.broker.publish(msg);\r\n  }\r\n\r\n  private onFormSubmit = async (evt: Event) => {\r\n  evt.preventDefault();\r\n  console.log(\"FormEventBinder: onFormSubmit called\");\r\n  const form = evt.target as HTMLFormElement;\r\n  const formId = form.id || \"\";\r\n  const values = this.extractFormValues(form);\r\n\r\n  // Optional: Announce the submit\r\n  this.broker.publish({\r\n    type: \"FormSubmit\",\r\n    topic: \"form\",\r\n    from: \"FormEventBinder\",\r\n    payload: { formId, values },\r\n    _remote: false,\r\n  });\r\n\r\n  // *** VALIDATE ALL FIELDS ***\r\n  const results = await this.dispatcher.validateAllFields(formId, values, form);\r\n\r\n  let allValid = true;\r\n  for (const { name, result } of results) {\r\n    // This is the key line: always publish the result for each field!\r\n    this.broker.publish({\r\n      type: \"FieldValidationResult\",\r\n      topic: \"form\",\r\n      from: \"FormEventBinder\",\r\n      payload: { formId, name, result },\r\n      _remote: false,\r\n    });\r\n    if (!result.valid) allValid = false;\r\n  }\r\n\r\n  if (allValid) {\r\n    this.broker.publish({\r\n      type: \"FormSubmitted\",\r\n      topic: \"form\",\r\n      from: \"FormEventBinder\",\r\n      payload: { formId, values },\r\n      _remote: false,\r\n    });\r\n  } else {\r\n    const firstInvalid = results.find((r: any) => !r.result.valid);\r\n    if (firstInvalid) {\r\n      const el = form.querySelector(`[name=\"${firstInvalid.name}\"]`);\r\n      if (el) (el as HTMLElement).focus();\r\n    }\r\n  }\r\n};\r\n\r\n  private extractFormValues(form: HTMLFormElement | null): Record<string, any> {\r\n    if (!form) return {};\r\n    const values: Record<string, any> = {};\r\n    Array.from(form.elements)\r\n      .filter(this.isBindableField)\r\n      .forEach((el: any) => {\r\n        if (el.name) values[el.name] = this.getFieldValue(el);\r\n      });\r\n    return values;\r\n  }\r\n\r\n  public getFieldValue(field: Element): any {\r\n    if (field instanceof HTMLInputElement) {\r\n      switch (field.type) {\r\n        case \"checkbox\":\r\n          if (field.form) {\r\n            const checkboxes = field.form.querySelectorAll<HTMLInputElement>(\r\n              `input[type=\"checkbox\"][name=\"${field.name}\"]`\r\n            );\r\n            if (checkboxes.length > 1) {\r\n              return Array.from(checkboxes)\r\n                .filter((cb) => cb.checked)\r\n                .map((cb) => cb.value);\r\n            }\r\n          }\r\n          return field.checked;\r\n        case \"radio\":\r\n          if (field.form) {\r\n            const checked = field.form.querySelector<HTMLInputElement>(\r\n              `input[type=\"radio\"][name=\"${field.name}\"]:checked`\r\n            );\r\n            return checked ? checked.value : null;\r\n          }\r\n          return field.checked ? field.value : null;\r\n        case \"file\":\r\n          return field.files ? Array.from(field.files) : null;\r\n        default:\r\n          return field.value;\r\n      }\r\n    } else if (field instanceof HTMLSelectElement) {\r\n      if (field.multiple) {\r\n        return Array.from(field.selectedOptions).map((option) => option.value);\r\n      }\r\n      return field.value;\r\n    } else if (field instanceof HTMLTextAreaElement) {\r\n      return field.value;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  public hasRemoteRule(field: Element): boolean {\r\n    return !!(\r\n      field instanceof HTMLElement &&\r\n      field.hasAttribute(\"data-rule-remote\") &&\r\n      !!field.getAttribute(\"data-rule-remote-provider\")\r\n    );\r\n  }\r\n\r\n  public isBindableField(\r\n    el: Element\r\n  ): el is HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement {\r\n    if (\r\n      !(\r\n        el instanceof HTMLInputElement ||\r\n        el instanceof HTMLSelectElement ||\r\n        el instanceof HTMLTextAreaElement\r\n      )\r\n    )\r\n      return false;\r\n    if (!el.name) return false;\r\n    if (el.type === \"hidden\") return false;\r\n    if (el.name.startsWith(\"__\")) return false;\r\n    if (el.hasAttribute(\"data-ignore-validation\")) return false;\r\n    if (\r\n      (el as HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement)\r\n        .disabled\r\n    )\r\n      return false;\r\n    return true;\r\n  }\r\n}\r\n","import { inject, injectable } from \"inversify\";\r\nimport ContainerTypes from \"../DI/ContainerTypes\";\r\n\r\n\r\nimport { IValidationResult } from \"../Interfaces/IValidationResult\";\r\nimport { IValidatorDispatcher } from \"../Interfaces/IValidatorDispatcher\";\r\nimport { IParsedFormSchema } from \"../Interfaces/IParsedFormSchema\";\r\nimport { IRuleDescriptor } from \"../Interfaces/IRuleDescriptor\";\r\nimport { IMessageBroker } from \"../../MessageBroker/Interfaces/IMessageBroker\";\r\nimport { IMessage } from \"../../MessageBroker/Interfaces/IMessage\";\r\nimport { IValidatorRegistry } from \"../Interfaces/IValidatorRegistry\";\r\nimport { IFieldRule } from '../Interfaces/IFieldRule';\r\n\r\n\r\n\r\n@injectable()\r\nexport class ValidatorDispatcher implements IValidatorDispatcher {\r\n  private parsedSchema: IParsedFormSchema | null = null;\r\n\r\n  constructor(\r\n    @inject(ContainerTypes.MessageBroker) private broker: IMessageBroker,\r\n    @inject(ContainerTypes.ValidatorRegistry) private validatorRegistry: IValidatorRegistry\r\n  ) {\r\n    this.broker.subscribe(\r\n      this.handleMessage,\r\n      (msg) =>\r\n        msg.topic === \"form\" &&\r\n        (\r\n          msg.type === \"FieldChanged\" ||\r\n          msg.type === \"FieldBlurred\" || // <-- Added!\r\n          msg.type === \"FieldRemoteValidate\"\r\n        )\r\n    );\r\n  }\r\n\r\n  setSchema(schema: IParsedFormSchema): void {\r\n    this.parsedSchema = schema;\r\n    if (this.broker && schema && schema.formName) {\r\n      this.broker.publish({\r\n        type: 'ValidationReady',\r\n        topic: 'form',\r\n        from: \"ValidatorDispatcher\",\r\n        payload: { formId: schema.formName },\r\n        _remote: false,\r\n      });\r\n    }\r\n  }\r\n\r\n handleMessage = async (msg: IMessage): Promise<void> => {\r\n    const { name, value, fieldType, remoteType, provider, endpoint, formId, allValues } = msg.payload || {};\r\n    let result: IValidationResult | null = null;\r\n\r\n    try {\r\n      if (msg.type === \"FieldRemoteValidate\") {\r\n        result = this.runRemoteValidation\r\n          ? await this.runRemoteValidation(remoteType, value, {\r\n              type: remoteType,\r\n              provider,\r\n              endpoint,\r\n              fieldType,\r\n              formId,\r\n              value,\r\n              allValues,\r\n            })\r\n          : null;\r\n      }\r\n      // Handle both FieldChanged and FieldBlurred here:\r\n      else if (msg.type === \"FieldChanged\" || msg.type === \"FieldBlurred\") {\r\n        // Try to get the form element if possible\r\n        const formEl = formId ? document.getElementById(formId) as HTMLFormElement : undefined;\r\n        result = await this.runLocalValidation(name, value, fieldType, formId, allValues, formEl);\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      if (result) {\r\n        this.broker.publish({\r\n          _remote: false,\r\n          type: \"FieldValidationResult\",\r\n          topic: \"form\",\r\n          from: \"ValidatorDispatcher\",\r\n          payload: { formId, name, result },\r\n          timestamp: new Date().toISOString(),\r\n        });\r\n      }\r\n    } catch (err: any) {\r\n      this.broker.publish({\r\n        _remote: false,\r\n        type: \"FieldValidationResult\",\r\n        topic: \"form\",\r\n        from: \"ValidatorDispatcher\",\r\n        payload: {\r\n          formId,\r\n          name,\r\n          result: { valid: false, message: err?.message || \"Validation error\" }\r\n        },\r\n        timestamp: new Date().toISOString(),\r\n      });\r\n    }\r\n  };\r\n\r\n  runLocalValidation = async (\r\n    name: string,\r\n    value: any,\r\n    fieldType: string,\r\n    formId: string,\r\n    allValues?: Record<string, any>,\r\n    formEl?: HTMLFormElement\r\n  ): Promise<IValidationResult> => {\r\n    // Try schema-based first, fallback to DOM-based rules\r\n    let rules: IFieldRule[] | null = null;\r\n\r\n    if (this.parsedSchema?.fields) {\r\n      const fieldSchema = this.parsedSchema.fields.find((f) => f.field === name);\r\n      if (fieldSchema && fieldSchema.rules) {\r\n        rules = fieldSchema.rules;\r\n      }\r\n    }\r\n    // Fallback: parse rules from DOM (if field not in schema)\r\n    if (!rules && formEl) {\r\n      const fieldEl = formEl.querySelector(`[name=\"${name}\"]`) as HTMLElement;\r\n      if (fieldEl) {\r\n        rules = this.parseRulesFromDOM(fieldEl);\r\n      }\r\n    }\r\n    if (!rules) return { valid: true };\r\n\r\n    const errors: string[] = [];\r\n    for (const rule of rules) {\r\n      const validator = this.validatorRegistry.getValidator(rule.type);\r\n      if (validator) {\r\n        try {\r\n          const res = await Promise.resolve(validator.validate(value, rule, allValues));\r\n          if (res && typeof res === \"object\" && res.valid === false) {\r\n            if (rule.stopOnFail !== false) return res;\r\n            else errors.push(res.message || \"Validation failed\");\r\n          }\r\n        } catch (err: any) {\r\n          errors.push(err?.message || `Error in ${rule.type} validator`);\r\n        }\r\n      }\r\n    }\r\n    if (errors.length) return { valid: false, message: errors.join(\"; \") };\r\n    return { valid: true };\r\n  };\r\n\r\n  // Enhanced DOM rule parsing for fallback validation\r\n  private parseRulesFromDOM(fieldEl: HTMLElement): IFieldRule[] {\r\n    const rules: IFieldRule[] = [];\r\n    \r\n    // Parse data-rule-* attributes\r\n    for (const attr of Array.from(fieldEl.attributes)) {\r\n      if (attr.name.startsWith(\"data-rule-\")) {\r\n        const ruleType = attr.name.replace(\"data-rule-\", \"\");\r\n        let param: any = attr.value;\r\n        \r\n        // Convert string values to appropriate types\r\n        if (param === \"true\") param = true;\r\n        if (param === \"false\") param = false;\r\n        if (!isNaN(Number(param)) && param !== \"\") param = Number(param);\r\n        \r\n        // Handle special cases\r\n        if (ruleType === \"remote\") {\r\n          const provider = fieldEl.getAttribute(\"data-rule-remote-provider\");\r\n          const endpoint = fieldEl.getAttribute(\"data-rule-remote-endpoint\");\r\n          const remoteType = fieldEl.getAttribute(\"data-rule-remote-type\");\r\n          \r\n          rules.push({\r\n            type: ruleType,\r\n            param,\r\n            provider,\r\n            endpoint,\r\n            remoteType,\r\n            message: fieldEl.getAttribute(\"data-rule-message\") || undefined,\r\n          });\r\n        } else {\r\n          rules.push({\r\n            type: ruleType,\r\n            param,\r\n            message: fieldEl.getAttribute(\"data-rule-message\") || undefined,\r\n          });\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Also check for HTML5 validation attributes\r\n    if (fieldEl.hasAttribute(\"required\")) {\r\n      rules.push({\r\n        type: \"required\",\r\n        param: true,\r\n        message: fieldEl.getAttribute(\"data-rule-message\") || \"This field is required.\",\r\n      });\r\n    }\r\n    \r\n    if (fieldEl.hasAttribute(\"minlength\")) {\r\n      const minLength = fieldEl.getAttribute(\"minlength\");\r\n      if (minLength) {\r\n        rules.push({\r\n          type: \"minlength\",\r\n          param: parseInt(minLength),\r\n          message: fieldEl.getAttribute(\"data-rule-message\") || `Minimum length is ${minLength} characters.`,\r\n        });\r\n      }\r\n    }\r\n    \r\n    if (fieldEl.hasAttribute(\"maxlength\")) {\r\n      const maxLength = fieldEl.getAttribute(\"maxlength\");\r\n      if (maxLength) {\r\n        rules.push({\r\n          type: \"maxlength\",\r\n          param: parseInt(maxLength),\r\n          message: fieldEl.getAttribute(\"data-rule-message\") || `Maximum length is ${maxLength} characters.`,\r\n        });\r\n      }\r\n    }\r\n    \r\n    if (fieldEl.hasAttribute(\"pattern\")) {\r\n      const pattern = fieldEl.getAttribute(\"pattern\");\r\n      if (pattern) {\r\n        rules.push({\r\n          type: \"pattern\",\r\n          param: pattern,\r\n          message: fieldEl.getAttribute(\"data-rule-message\") || \"Value does not match required pattern.\",\r\n        });\r\n      }\r\n    }\r\n    \r\n    // Handle email type\r\n    if (fieldEl instanceof HTMLInputElement && fieldEl.type === \"email\") {\r\n      rules.push({\r\n        type: \"email\",\r\n        param: true,\r\n        message: fieldEl.getAttribute(\"data-rule-message\") || \"Please enter a valid email address.\",\r\n      });\r\n    }\r\n    \r\n    console.log(`[ValidatorDispatcher] Parsed rules for field ${fieldEl.getAttribute('name')}:`, rules);\r\n    return rules;\r\n  }\r\n\r\n  // --- (rest unchanged) ---\r\n\r\n  runRemoteValidation = async (\r\n    remoteType: string,\r\n    value: any,\r\n    rule: IRuleDescriptor\r\n  ): Promise<IValidationResult> => {\r\n    let validator = this.validatorRegistry.getValidator(\"remote\") || this.validatorRegistry.getValidator(\"Remote\");\r\n    if (!validator) {\r\n      return { valid: false, message: \"Remote validation not available\" };\r\n    }\r\n    const context = {\r\n      endpoint: rule.endpoint,\r\n      provider: rule.provider,\r\n      remoteType,\r\n      ...rule,\r\n    };\r\n    try {\r\n      const res = await validator.validate(value, context);\r\n      if (typeof res === \"boolean\") return { valid: res };\r\n      return res;\r\n    } catch (err: any) {\r\n      return { valid: false, message: err?.message || \"Remote validation error\" };\r\n    }\r\n  };\r\n\r\n  async validateAllFields(formId: string, values: Record<string, any>, formEl?: HTMLFormElement): Promise<{ name: string, result: IValidationResult }[]> {\r\n    const results: { name: string, result: IValidationResult }[] = [];\r\n\r\n    // If we have a parsed schema, use it\r\n    if (this.parsedSchema?.fields) {\r\n      for (const fieldSchema of this.parsedSchema.fields) {\r\n        const name = fieldSchema.field;\r\n        let fieldResult: IValidationResult = { valid: true };\r\n        for (const rule of fieldSchema.rules) {\r\n          const validator = this.validatorRegistry.getValidator(rule.type);\r\n          if (validator) {\r\n            let res: IValidationResult;\r\n            if ('validate' in validator) {\r\n              const validationResult = await Promise.resolve(validator.validate(values[name], rule, values));\r\n              res = typeof validationResult === \"boolean\" ? { valid: validationResult } : validationResult;\r\n            } else {\r\n              continue;\r\n            }\r\n            if (res && typeof res === \"object\" && res.valid === false) {\r\n              fieldResult = res;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        results.push({ name, result: fieldResult });\r\n      }\r\n    } \r\n    // Fallback: Parse rules from DOM if no schema is available\r\n    else if (formEl) {\r\n      console.log(`[ValidatorDispatcher] No schema found, parsing rules from DOM for form: ${formId}`);\r\n      \r\n      const fields = Array.from(formEl.elements).filter(\r\n        element => element instanceof HTMLInputElement || \r\n                   element instanceof HTMLSelectElement || \r\n                   element instanceof HTMLTextAreaElement\r\n      ) as (HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement)[];\r\n\r\n      for (const field of fields) {\r\n        if (!field.name) continue;\r\n        \r\n        const fieldRules = this.parseRulesFromDOM(field);\r\n        if (fieldRules.length === 0) continue;\r\n\r\n        let fieldResult: IValidationResult = { valid: true };\r\n        \r\n        for (const rule of fieldRules) {\r\n          const validator = this.validatorRegistry.getValidator(rule.type);\r\n          if (validator) {\r\n            try {\r\n              const validationResult = await Promise.resolve(validator.validate(values[field.name], rule, values));\r\n              const res = typeof validationResult === \"boolean\" ? { valid: validationResult } : validationResult;\r\n              \r\n              if (res && typeof res === \"object\" && res.valid === false) {\r\n                fieldResult = res;\r\n                break; // Stop on first validation failure\r\n              }\r\n            } catch (err: any) {\r\n              console.error(`[ValidatorDispatcher] Error validating field ${field.name}:`, err);\r\n              fieldResult = { \r\n                valid: false, \r\n                message: err?.message || `Error in ${rule.type} validator` \r\n              };\r\n              break;\r\n            }\r\n          } else {\r\n            console.warn(`[ValidatorDispatcher] Validator not found for type: ${rule.type}`);\r\n          }\r\n        }\r\n        \r\n        results.push({ name: field.name, result: fieldResult });\r\n      }\r\n    } else {\r\n      console.warn(`[ValidatorDispatcher] No schema or form element provided for validation`);\r\n    }\r\n\r\n    console.log(`[ValidatorDispatcher] Validation results for form ${formId}:`, results);\r\n    return results;\r\n  }\r\n}\r\n","import { injectable } from \"inversify\";\r\n\r\nimport { IValidator } from \"../Interfaces/IValidator\";\r\nimport { IAsyncValidator } from \"../Interfaces/IAsyncValidator\";\r\nimport { IValidatorRegistry } from \"../Interfaces/IValidatorRegistry\";\r\n\r\n\r\n@injectable()\r\nexport class ValidatorRegistry implements IValidatorRegistry {\r\n  private validators = new Map<string, IValidator | IAsyncValidator>();\r\n\r\n  register(type: string, validator: IValidator | IAsyncValidator): void {\r\n    this.validators.set(type, validator);\r\n  }\r\n\r\n  getValidator(type: string): IValidator | IAsyncValidator | undefined {\r\n    const validator = this.validators.get(type);\r\n    console.log(`[ValidatorRegistry] getValidator('${type}') =>`, validator ? 'FOUND' : 'NOT FOUND');\r\n    return validator;\r\n  }\r\n\r\n  unregister(type: string): void {\r\n    this.validators.delete(type);\r\n  }\r\n\r\n  listValidators(): string[] {\r\n    return Array.from(this.validators.keys());\r\n  }\r\n\r\n  clear(): void {\r\n    this.validators.clear();\r\n  }\r\n}\r\n","import { injectable } from \"inversify\";\r\nimport { IHttpClient } from \"../Interfaces/IHttpClient\";\r\nimport { HttpClientConfig } from \"../Interfaces/IHttpClientFactory\";\r\n\r\n@injectable()\r\nexport class HttpClient implements IHttpClient {\r\n  constructor(private config: HttpClientConfig = {}) {}\r\n\r\n  private async applyInterceptors(input: RequestInfo, init: RequestInit = {}) {\r\n    let req: [RequestInfo, RequestInit?] = [input, init];\r\n    if (this.config.interceptors) {\r\n      for (const interceptor of this.config.interceptors) {\r\n        req = await interceptor(req[0], req[1]);\r\n      }\r\n    }\r\n    return req;\r\n  }\r\n\r\n  private async handleResponse(response: Response) {\r\n    let res = response;\r\n    if (this.config.responseInterceptors) {\r\n      for (const interceptor of this.config.responseInterceptors) {\r\n        res = await interceptor(res);\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  private async request<T>(method: string, url: string, data?: any, options?: RequestInit): Promise<T> {\r\n    let finalUrl = url;\r\n    let headers: Record<string, string> = { ...this.config.defaultHeaders, ...(options?.headers as Record<string, string> || {}) };\r\n    let init: RequestInit = { method, ...options, headers };\r\n\r\n    if (this.config.baseUrl && !/^https?:\\/\\//.test(url)) {\r\n      finalUrl = this.config.baseUrl.replace(/\\/+$/, \"\") + \"/\" + url.replace(/^\\/+/, \"\");\r\n    }\r\n\r\n    if (data !== undefined && method !== \"GET\" && method !== \"HEAD\") {\r\n      init.body = typeof data === \"string\" ? data : JSON.stringify(data);\r\n      if (!headers[\"Content-Type\"]) {\r\n        headers[\"Content-Type\"] = \"application/json\";\r\n      }\r\n    }\r\n\r\n    const [interceptedRequestInfo, interceptedInit] = await this.applyInterceptors(finalUrl, init);\r\n\r\n    let response: Response;\r\n    if (typeof interceptedRequestInfo === \"string\") {\r\n      response = await fetch(interceptedRequestInfo, interceptedInit);\r\n    } else {\r\n      response = await fetch(interceptedRequestInfo);\r\n    }\r\n    const handledResponse = await this.handleResponse(response);\r\n\r\n    if (!handledResponse.ok) {\r\n      throw new Error(`[HttpClient] Request failed: ${handledResponse.status} ${handledResponse.statusText}`);\r\n    }\r\n\r\n    const ct = handledResponse.headers.get(\"content-type\");\r\n    if (ct && ct.includes(\"application/json\")) {\r\n      return handledResponse.json() as Promise<T>;\r\n    }\r\n    return handledResponse.text() as unknown as T;\r\n  }\r\n\r\n  get<T = any>(url: string, options?: RequestInit): Promise<T> {\r\n    return this.request<T>(\"GET\", url, undefined, options);\r\n  }\r\n  post<T = any>(url: string, data?: any, options?: RequestInit): Promise<T> {\r\n    return this.request<T>(\"POST\", url, data, options);\r\n  }\r\n  put<T = any>(url: string, data?: any, options?: RequestInit): Promise<T> {\r\n    return this.request<T>(\"PUT\", url, data, options);\r\n  }\r\n  delete<T = any>(url: string, options?: RequestInit): Promise<T> {\r\n    return this.request<T>(\"DELETE\", url, undefined, options);\r\n  }\r\n\r\n  /**\r\n   * Sends a POST request to the endpoint (or relative path if baseUrl is set).\r\n   */\r\n  async send<TResponse = any>(endpoint: string, payload: any): Promise<TResponse> {\r\n    return this.post<TResponse>(endpoint, payload);\r\n  }\r\n}","import { injectable } from \"inversify\";\r\nimport { HttpClientConfig, IHttpClientFactory } from \"../Interfaces/IHttpClientFactory\";\r\nimport { IHttpClient } from \"../Interfaces/IHttpClient\";\r\nimport { HttpClient } from \"./HttpClient\";\r\n\r\n@injectable()\r\nexport class HttpClientFactory implements IHttpClientFactory {\r\n  create(config?: HttpClientConfig, transport?: IHttpClient): IHttpClient {\r\n    if (!transport) {\r\n      transport = new HttpClient(config || {});\r\n    }\r\n    return new HttpClient({\r\n      baseUrl: config?.baseUrl,\r\n      defaultHeaders: config?.defaultHeaders,\r\n      interceptors: config?.interceptors,\r\n      responseInterceptors: config?.responseInterceptors\r\n    });\r\n  }\r\n  \r\n}","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { IMessage } from \"../Interfaces/IMessage\";\r\nimport {\r\n  CloseCallback,\r\n  MessageCallback,\r\n  MessageHandler,\r\n  OpenCallback,\r\n} from \"../../TYPES\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { ErrorCallback } from \"../Types\";\r\nimport { ITransportProvider } from \"../Interfaces/ITransportProvider\";\r\nimport { injectable } from 'inversify';\r\n\r\n@injectable()\r\nexport class WebSocketTransport implements ITransportProvider {\r\n  public readonly name = \"WebSocketTransport\";\r\n  public endpoint: string = \"\";\r\n  public id: string = uuidv4();\r\n  isOpen: boolean = false;\r\n  public get readyState() { return this.ws?.readyState ?? WebSocket.CLOSED; }\r\n\r\n  // Internal\r\n  public clientId: string = uuidv4();\r\n  public ws: WebSocket | null = null;\r\n  private _connectionId: string | null = null;\r\n  private isConnecting = false;\r\n  private openPromise!: Promise<void>;\r\n  private openResolve!: () => void;\r\n  private handlers = new Set<MessageHandler>();\r\n  private topicHandlers = new Map<string, Set<MessageHandler>>();\r\n  private pending = new Map<string, (msg: IMessage) => void>();\r\n\r\n  // Callbacks\r\n  onOpen?: OpenCallback;\r\n  onClose?: CloseCallback;\r\n  onError?: ErrorCallback;\r\n  onRawMessage?: MessageCallback;\r\n  onConnectionIdAssigned?: (connectionId: string) => void;\r\n\r\n  private autoReconnect = true;\r\n  private reconnectDelay = 1000;\r\n  private maxReconnectDelay = 30000;\r\n  private reconnectAttempts = 0;\r\n  private reconnectTimer: any = null;\r\n  private logger: ((msg: string) => void) | null = null;\r\n\r\n  constructor() {\r\n    this.resetOpenPromise();\r\n    // No auto-connect! User must call setEndpoint()\r\n    if (typeof window !== \"undefined\") {\r\n      window.addEventListener(\"beforeunload\", () => this.disconnect());\r\n    }\r\n  }\r\n\r\n  /** Set (or change) the WebSocket endpoint and (re)connect */\r\n  public setEndpoint(endpoint: string) {\r\n    if (this.endpoint !== endpoint) {\r\n      this.endpoint = endpoint;\r\n      this.connect();\r\n    }\r\n  }\r\n\r\n  // Required by interface (async for future compatibility)\r\n  async connect(): Promise<void> {\r\n    if (!this.endpoint) {\r\n      throw new Error(\"WebSocket endpoint not set. Use setEndpoint() first.\");\r\n    }\r\n    if (this.isOpen || this.isConnecting) return;\r\n    this.isConnecting = true;\r\n    if (this.ws) {\r\n      this.log(\"[WS] Closing old socket before reconnect\");\r\n      this.ws.close();\r\n    }\r\n    this.ws = new WebSocket(this.endpoint);\r\n    this.ws.onopen = () => {\r\n      this.isConnecting = false;\r\n      this.openResolve();\r\n      this.onOpen?.(this);\r\n      this.resetOpenPromise();\r\n      this.log(\"[WS] Connected\");\r\n      this.reconnectAttempts = 0;\r\n      if (this.reconnectTimer) {\r\n        clearTimeout(this.reconnectTimer);\r\n        this.reconnectTimer = null;\r\n      }\r\n    };\r\n    this.ws.onclose = (evt) => {\r\n      this._connectionId = null;\r\n      this.onClose?.(evt, this);\r\n      this.log(\"[WS] Disconnected\");\r\n      this.rejectAllPending(\"WebSocket closed\");\r\n      if (this.autoReconnect && this.endpoint) this.scheduleReconnect();\r\n    };\r\n    this.ws.onerror = (evt) => {\r\n      const error = new Error(\"WebSocket error\");\r\n      (error as any).event = evt;\r\n      this.onError?.(error, this, evt);\r\n      this.log(`[WS] Error: ${error}`);\r\n      this.rejectAllPending(\"WebSocket error\");\r\n      if (this.autoReconnect && this.endpoint) this.scheduleReconnect();\r\n    };\r\n    this.ws.onmessage = (evt) => {\r\n      this.onRawMessage?.(evt.data, this);\r\n      this.handleIncomingMessage(evt.data);\r\n    };\r\n  }\r\n\r\n  async disconnect(): Promise<void> {\r\n    if (this.ws) {\r\n      this.ws.close();\r\n      this.ws = null;\r\n      this.rejectAllPending(\"WebSocket disconnected\");\r\n    }\r\n  }\r\n\r\n  async sendBroadcast(msg: IMessage): Promise<void> {\r\n    await this.send(msg.type, msg);\r\n  }\r\n\r\n  async send<TResponse = any>(endpoint: string, payload: any): Promise<TResponse> {\r\n    await this.openPromise;\r\n    if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\r\n      throw new Error(\"WebSocket not open\");\r\n    }\r\n    const msg: IMessage = typeof payload === \"object\" ? { ...payload } : { type: String(payload) };\r\n    msg.id ??= uuidv4();\r\n    msg.from ??= this.connectionId ?? this.clientId;\r\n    msg.timestamp ??= new Date().toISOString();\r\n    if (this.connectionId) msg.connectionId = this.connectionId;\r\n\r\n    this.ws.send(JSON.stringify(msg));\r\n    this.log(`[WS] Sent: ${msg.type} ${msg.topic ?? \"\"} ${msg.id}`);\r\n    return undefined as unknown as TResponse;\r\n  }\r\n\r\n  async sendRequest<T = any>(msg: IMessage, timeout = 8000): Promise<T> {\r\n    return this.request<T>(msg, timeout) as Promise<T>;\r\n  }\r\n\r\n  onMessage?(cb: (msg: any) => void): void {\r\n    this.onAny(cb);\r\n  }\r\n\r\n  subscribe(topicOrType: string, handler: MessageHandler): void {\r\n    if (!this.topicHandlers.has(topicOrType)) {\r\n      this.topicHandlers.set(topicOrType, new Set());\r\n    }\r\n    this.topicHandlers.get(topicOrType)!.add(handler);\r\n  }\r\n  unsubscribe(topicOrType: string, handler: MessageHandler): void {\r\n    if (this.topicHandlers.has(topicOrType)) {\r\n      this.topicHandlers.get(topicOrType)!.delete(handler);\r\n      if (this.topicHandlers.get(topicOrType)!.size === 0) {\r\n        this.topicHandlers.delete(topicOrType);\r\n      }\r\n    }\r\n  }\r\n  onAny(handler: MessageHandler): void {\r\n    this.handlers.add(handler);\r\n  }\r\n\r\n  async ping(): Promise<number> {\r\n    const start = Date.now();\r\n    await this.request({ type: \"Ping\", _remote: false });\r\n    return Date.now() - start;\r\n  }\r\n\r\n  async sendUserMessage(text: string): Promise<void> {\r\n    await this.send(\r\n      \"UserMessage\",\r\n      {\r\n        type: \"UserMessage\",\r\n        payload: text,\r\n        _remote: false,\r\n      }\r\n    ).catch((err) => {\r\n      this.log(\"Failed to send user message: \" + err);\r\n    });\r\n  }\r\n\r\n  private async sendMsgInternal(msg: IMessage) {\r\n    await this.openPromise;\r\n    if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\r\n      throw new Error(\"WebSocket not open\");\r\n    }\r\n    this.ws.send(JSON.stringify(msg));\r\n    this.log(`[WS] Sent: ${msg.type} ${msg.topic ?? \"\"} ${msg.id}`);\r\n  }\r\n\r\n  public async request<T = any>(msg: IMessage, timeout = 8000): Promise<IMessage> {\r\n    await this.openPromise;\r\n    msg.id ??= uuidv4();\r\n    msg.from ??= this.connectionId ?? this.clientId;\r\n    msg.timestamp ??= new Date().toISOString();\r\n    if (this.connectionId) msg.connectionId = this.connectionId;\r\n\r\n    if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\r\n      throw new Error(\"WebSocket not open\");\r\n    }\r\n    this.ws.send(JSON.stringify(msg));\r\n    this.log(`[WS] Sent: ${msg.type} ${msg.topic ?? \"\"} ${msg.id}`);\r\n\r\n    return new Promise<IMessage>((resolve, reject) => {\r\n      const timer = setTimeout(() => {\r\n        this.pending.delete(msg.id!);\r\n        this.log(\r\n          `[WS][TIMEOUT] Request timed out for msg.id=${msg.id} type=${msg.type} \r\n          from=${msg.from} connId=${this.connectionId ?? this.clientId} endpoint=${this.endpoint}`\r\n        );\r\n        reject(new Error(\r\n          `Request timed out (id=${msg.id}, type=${msg.type}, from=${msg.from}, connId=${this.connectionId ?? this.clientId}, endpoint=${this.endpoint})`\r\n        ));\r\n      }, timeout);\r\n\r\n      this.pending.set(msg.id!, (reply) => {\r\n        clearTimeout(timer);\r\n        this.pending.delete(msg.id!);\r\n        resolve(reply);\r\n      });\r\n    });\r\n  }\r\n\r\n  private handleIncomingMessage(data: string) {\r\n    let msg: IMessage;\r\n    try {\r\n      msg = JSON.parse(data);\r\n    } catch {\r\n      this.log(\"Malformed message: \" + data);\r\n      return;\r\n    }\r\n    if (msg.type === \"ConnectionId\" && msg.id) {\r\n      this._connectionId = msg.id;\r\n      this.onConnectionIdAssigned?.(msg.id);\r\n      this.log(`[WS] Assigned connectionId: ${this._connectionId}`);\r\n    }\r\n    if (msg.id && this.pending.has(msg.id)) {\r\n      this.pending.get(msg.id)!(msg);\r\n    }\r\n    if (msg.topic && this.topicHandlers.has(msg.topic)) {\r\n      this.topicHandlers.get(msg.topic)!.forEach((handler) => handler(msg));\r\n    }\r\n    this.handlers.forEach((handler) => handler(msg));\r\n    this.log(\r\n      `[WS] Received: ${msg.type} ${msg.topic ?? \"\"} ${msg.id ?? \"\"}`\r\n    );\r\n  }\r\n\r\n  private rejectAllPending(reason: string) {\r\n    for (const [id, cb] of this.pending.entries()) {\r\n      cb({ type: \"Error\", error: reason, id } as any);\r\n    }\r\n    this.pending.clear();\r\n  }\r\n  private resetOpenPromise() {\r\n    this.openPromise = new Promise((res) => (this.openResolve = res));\r\n  }\r\n  private log(msg: string) {\r\n    if (this.logger) {\r\n      this.logger(msg);\r\n    } else if (\r\n      typeof window !== \"undefined\" &&\r\n      window.console\r\n    ) {\r\n      console.log(`%c${msg}`);\r\n    } else {\r\n      console.log(msg);\r\n    }\r\n  }\r\n  private scheduleReconnect() {\r\n    this.reconnectAttempts++;\r\n    const delay = Math.min(\r\n      this.reconnectDelay * Math.pow(2, this.reconnectAttempts - 1),\r\n      this.maxReconnectDelay\r\n    );\r\n    this.log(\r\n      `[WS] Reconnecting in ${delay}ms (attempt ${this.reconnectAttempts})`\r\n    );\r\n    this.reconnectTimer = setTimeout(() => {\r\n      this.connect();\r\n    }, delay);\r\n  }\r\n\r\n  get connectionId(): string | null {\r\n    return this._connectionId;\r\n  }\r\n}\r\n\r\n","import { Container } from 'inversify';\r\nimport { MessageBroker } from '../../MessageBroker/MessageBroker';\r\nimport { IMessageBroker } from '../../MessageBroker/Interfaces/IMessageBroker';\r\nimport { ContainerTypes } from './ContainerTypes';\r\nimport { ITransportProviderRegistry } from '../../MessageBroker/Interfaces/ITransportProviderRegistry';\r\nimport { TransportProviderRegistry } from '../../MessageBroker/Registries/TransportProviderRegistry';\r\nimport { IMessageFilterRegistry } from '../../MessageBroker/Interfaces/IMessageFilterRegistry';\r\nimport { MessageFilterRegistry } from '../../MessageBroker/Registries/MessageFilterRegistry';\r\nimport { FormValidationMiddleware } from '../Middleware/FormValidationMiddleware';\r\nimport { IRuleParser } from '../Interfaces/IRuleParser';\r\nimport { RuleParser } from '../Parser/RuleParser';\r\nimport { IFormValidationMiddleware } from '../Interfaces/IFormValidationMiddleware';\r\nimport { IFormEventBinder } from '../Interfaces/IFormEventBinder';\r\nimport { FormEventBinder } from '../Binders/FormEventBinder';\r\nimport { IValidatorDispatcher } from '../Interfaces/IValidatorDispatcher';\r\nimport { ValidatorDispatcher } from '../Dispatchers/ValidatorDispatcher';\r\nimport { IValidatorRegistry } from '../Interfaces/IValidatorRegistry';\r\nimport { ValidatorRegistry } from '../Registry/ValidatorRegistry';\r\nimport { IHttpClientFactory } from '../../MessageBroker/Interfaces/IHttpClientFactory';\r\nimport { HttpClientFactory } from '../../MessageBroker/Factory/HttpClientFactory';\r\nimport { IWebSocketTransport } from '../../MessageBroker/Interfaces/IWebSocketTransport';\r\nimport { WebSocketTransport } from '../../MessageBroker/Transports/WebSocketTransport';\r\n\r\n\r\nconst container = new Container();\r\n\r\n// --- Core Messaging/Transport ---\r\ncontainer.bind<IMessageBroker>(ContainerTypes.MessageBroker)\r\n  .to(MessageBroker).inSingletonScope();\r\ncontainer.bind<ITransportProviderRegistry>(ContainerTypes.TransportProviderRegistry)\r\n  .to(TransportProviderRegistry).inSingletonScope();\r\ncontainer.bind<IMessageFilterRegistry>(ContainerTypes.MessageFilterRegistry)\r\n  .to(MessageFilterRegistry).inSingletonScope();\r\n\r\n  container.bind<IWebSocketTransport>(ContainerTypes.WebSocketTransportProvider)\r\n  .to(WebSocketTransport).inSingletonScope(); // Example WebSocket transport\r\n\r\n// --- Validation/Parsing ---\r\ncontainer.bind<IRuleParser>(ContainerTypes.RuleParser)\r\n  .to(RuleParser).inSingletonScope();\r\n//container.bind<IFormEventBinder>(ContainerTypes.FormEventBinder)\r\n // .to(FormEventBinder).inSingletonScope();\r\ncontainer.bind<IValidatorDispatcher>(ContainerTypes.ValidatorDispatcher)\r\n  .to(ValidatorDispatcher).inSingletonScope();\r\ncontainer.bind<IValidatorRegistry>(ContainerTypes.ValidatorRegistry)\r\n  .to(ValidatorRegistry).inSingletonScope();\r\n\r\n// --- HTTP/Remote ---\r\ncontainer.bind<IHttpClientFactory>(ContainerTypes.HttpClientFactory)\r\n  .to(HttpClientFactory).inSingletonScope();\r\n\r\n\r\nconst formEventBinder = new FormEventBinder(\r\n  container.get<IMessageBroker>(ContainerTypes.MessageBroker),\r\n  container.get<IValidatorDispatcher>(ContainerTypes.ValidatorDispatcher)\r\n);\r\n\r\n\r\n// --- FormEventBinder (let DI inject everything) ---\r\ncontainer.bind<IFormEventBinder>(ContainerTypes.FormEventBinder).toConstantValue(formEventBinder);\r\n\r\n// --- FormValidationMiddleware (let DI inject everything) ---\r\n//container.bind<IFormValidationMiddleware>(ContainerTypes.FormValidationMiddleware)\r\n  //.to(FormValidationMiddleware).inSingletonScope();\r\n\r\n\r\ncontainer.bind<FormValidationMiddleware>(ContainerTypes.FormValidationMiddleware)\r\n  .toConstantValue(new FormValidationMiddleware(\r\n    container.get<IFormEventBinder>(ContainerTypes.FormEventBinder)\r\n  ));\r\n\r\n// --- Export for use elsewhere ---\r\nexport { container, ContainerTypes };\r\n\r\n\r\n","import { IMessage } from \"../Interfaces/IMessage\";\r\nimport { ITransportProvider } from \"../Interfaces/ITransportProvider\";\r\n\r\n\r\n// Simple UUID (or use your preferred method)\r\nfunction uuidv4(): string {\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\r\n    const r = (Math.random() * 16) | 0,\r\n      v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\n/**\r\n * Enhanced in-memory pub/sub transport with request/reply support.\r\n */\r\nexport class InMemoryTransport implements ITransportProvider {\r\n  public readonly name = \"InMemoryTransport\";\r\n  public readonly endpoint = \"local\";\r\n  public readonly readyState = 1;\r\n\r\n  // static event bus for all instances in same JS runtime\r\n  private static globalListeners: Set<(msg: IMessage) => void> = new Set();\r\n\r\n  // --- Request/Reply support ---\r\n  private static pendingReplies: Map<string, (msg: IMessage) => void> = new Map();\r\n\r\n  private onMessageHandler?: (msg: IMessage) => void;\r\n\r\n  onMessage(cb: (msg: IMessage) => void): void {\r\n    this.onMessageHandler = cb;\r\n    InMemoryTransport.globalListeners.add(cb);\r\n  }\r\n\r\n  async disconnect(): Promise<void> {\r\n    if (this.onMessageHandler) {\r\n      InMemoryTransport.globalListeners.delete(this.onMessageHandler);\r\n      this.onMessageHandler = undefined;\r\n    }\r\n  }\r\n\r\n  async connect(): Promise<void> {\r\n    // no-op for in-memory\r\n  }\r\n\r\n  async sendBroadcast(msg: IMessage): Promise<void> {\r\n    // Broadcast to all listeners\r\n    InMemoryTransport.globalListeners.forEach(cb => {\r\n      try {\r\n        cb(msg);\r\n      } catch (err) {\r\n        // Handle/log errors as needed\r\n      }\r\n    });\r\n  }\r\n\r\n  async send<TResponse = any>(endpoint: string, payload: any): Promise<TResponse> {\r\n    await this.sendBroadcast(payload as IMessage);\r\n    return undefined as unknown as TResponse;\r\n  }\r\n\r\n  /** Request/reply with correlationId */\r\n  async sendRequest<T = any>(msg: IMessage, timeout = 8000): Promise<T> {\r\n    if (!msg.id) msg.id = uuidv4();\r\n    msg._isRequest = true;\r\n\r\n    // Set up a promise that will be resolved by the reply\r\n    return new Promise<T>((resolve, reject) => {\r\n      const timer = setTimeout(() => {\r\n        InMemoryTransport.pendingReplies.delete(msg.id!);\r\n        reject(new Error(\"Request timed out: \" + msg.id));\r\n      }, timeout);\r\n\r\n      InMemoryTransport.pendingReplies.set(msg.id!, (reply: IMessage) => {\r\n        clearTimeout(timer);\r\n        InMemoryTransport.pendingReplies.delete(msg.id!);\r\n        resolve(reply as T);\r\n      });\r\n\r\n      // Send the message to all listeners (including self, for testing)\r\n      this.sendBroadcast(msg);\r\n    });\r\n  }\r\n\r\n  // How a consumer should reply to a request (for demo purposes)\r\n  static replyToRequest(requestMsg: IMessage, replyPayload: any) {\r\n    // Form a reply message, keeping the same ID (correlation)\r\n    const reply: IMessage = {\r\n      ...replyPayload,\r\n      id: requestMsg.id,\r\n      _isReply: true\r\n    };\r\n    // Synchronously resolve any awaiting promise\r\n    const pending = InMemoryTransport.pendingReplies.get(requestMsg.id!);\r\n    if (pending) {\r\n      pending(reply);\r\n    }\r\n  }\r\n}\r\n","import { IMessage } from \"../Interfaces/IMessage\";\r\nimport { MessageBroker } from \"../MessageBroker\";\r\n\r\n\r\n/**\r\n * Middleware to log all live subscribers before message is published.\r\n * You can add this via `broker.use(logLiveSubscribersMiddleware)`\r\n */\r\nexport function logLiveSubscribersMiddleware(\r\n  broker: MessageBroker, // Pass the broker so middleware can access .subscribers\r\n  label: string = \"\"\r\n) {\r\n  return (msg: IMessage, next: (msg: IMessage) => void) => {\r\n    const subscribers = broker.getSubscribers();\r\n    console.log(`[LiveSubscribers] ${label} Subscribers: ${subscribers.length}`);\r\n    let i = 1;\r\n    for (const sub of subscribers) {\r\n      // Optionally, print just the handler name (if it exists)\r\n      let name = sub.handler.name || \"(anonymous)\";\r\n      console.log(`  ${i++}. Handler: ${name}`, sub);\r\n    }\r\n    next(msg);\r\n  };\r\n}\r\n\r\n\r\n","import { IMessage } from \"../../MessageBroker/Interfaces/IMessage\";\r\nimport { IMessageBroker } from \"../../MessageBroker/Interfaces/IMessageBroker\";\r\nimport ContainerTypes from \"../DI/ContainerTypes\";\r\nimport { UIBinderMsg } from \"../Interfaces/IUiBindingMsg\";\r\nimport { inject, injectable } from 'inversify';\r\n\r\n@injectable()\r\nexport class UIBinder {\r\n  constructor(@inject(ContainerTypes.MessageBroker) private readonly broker: IMessageBroker) {\r\n    broker.subscribe(\r\n      (msg: IMessage) => this.handleMessage(msg as UIBinderMsg),\r\n      (msg: IMessage) =>\r\n        msg.type === \"FieldValidationResult\" ||\r\n        msg.type === \"StatusMessage\" ||\r\n        msg.type === \"ErrorMessage\"\r\n    );\r\n  }\r\n\r\n  handleMessage(msg: UIBinderMsg) {\r\n    if (!msg?.payload) return;\r\n\r\n    // Prefer explicit 'name', else 'field'\r\n    const field: string | undefined = msg.payload.name ?? msg.payload.field;\r\n    const { formId, formName } = msg.payload;\r\n\r\n    if (!field) return;\r\n\r\n    // Defensive: Ensure there's always a selector match\r\n    const el = this.findMsgEl(formId, formName, field);\r\n    if (!el) return;\r\n\r\n    if (msg.type === \"FieldValidationResult\" && msg.payload.result) {\r\n      const result = msg.payload.result;\r\n      if (typeof result.valid === \"boolean\") {\r\n        if (!result.valid) {\r\n          this.showFieldMessage(el, result.message || \"Invalid value\", \"error\");\r\n        } else {\r\n          this.clearField(el);\r\n        }\r\n      }\r\n    } else if (\r\n      (msg.type === \"StatusMessage\" || msg.type === \"ErrorMessage\") &&\r\n      msg.payload.message\r\n    ) {\r\n      const level: \"info\" | \"success\" | \"error\" =\r\n        msg.type === \"ErrorMessage\"\r\n          ? \"error\"\r\n          : (msg.payload.level as any) || \"info\";\r\n      this.showFieldMessage(el, msg.payload.message, level);\r\n    }\r\n  }\r\n\r\n  private findMsgEl(\r\n    formId: string | undefined,\r\n    formName: string | undefined,\r\n    field: string\r\n  ): Element | null {\r\n    // Support for field names with [] for array fields (checkbox groups)\r\n    const baseField = field.replace(/\\[\\]$/, \"\");\r\n\r\n    if (formId) {\r\n      const form = document.getElementById(formId);\r\n      if (form) return form.querySelector(`[data-valmsg-for=\"${baseField}\"]`);\r\n    }\r\n    if (formName) {\r\n      const form = document.querySelector(`form[name=\"${formName}\"]`);\r\n      if (form) return form.querySelector(`[data-valmsg-for=\"${baseField}\"]`);\r\n    }\r\n    return document.querySelector(`[data-valmsg-for=\"${baseField}\"]`);\r\n  }\r\n\r\n  showFieldMessage(\r\n    el: Element,\r\n    message: string,\r\n    level: \"info\" | \"success\" | \"error\"\r\n  ) {\r\n    el.innerHTML = `<span class=\"toast toast-${level}\" aria-live=\"polite\">${message}</span>`;\r\n    el.setAttribute(\"role\", \"alert\");\r\n    el.setAttribute(\"aria-live\", \"polite\");\r\n    el.setAttribute(\"aria-atomic\", \"true\");\r\n    el.setAttribute(\"data-valmsg-active\", level);\r\n\r\n    // Only auto-fade for non-errors (success/info)\r\n    if (level !== \"error\") {\r\n      void (el as HTMLElement).offsetWidth; // Force reflow to retrigger animation\r\n      el.classList.add(\"fade-out-toast\");\r\n      el.addEventListener(\r\n        \"animationend\",\r\n        () => this.clearField(el),\r\n        { once: true }\r\n      );\r\n    }\r\n  }\r\n\r\n  clearField(el: Element) {\r\n    el.innerHTML = \"\";\r\n    el.removeAttribute(\"role\");\r\n    el.removeAttribute(\"aria-live\");\r\n    el.removeAttribute(\"aria-atomic\");\r\n    el.removeAttribute(\"data-valmsg-active\");\r\n    el.classList.remove(\"fade-out-toast\");\r\n  }\r\n}\r\n\r\n","import { IRuleDescriptor } from \"../Interfaces/IRuleDescriptor\";\r\nimport { IValidationResult } from \"../Interfaces/IValidationResult\";\r\nimport { IValidator } from \"../Interfaces/IValidator\";\r\n\r\n/**\r\n * Required Field Validator\r\n * \r\n * Validates that a field has a value and is not empty. This validator handles\r\n * different input types appropriately:\r\n * - Text inputs: Must not be empty string\r\n * - Arrays: Must have at least one element\r\n * - Booleans: Must be true\r\n * - Null/undefined: Always invalid\r\n * \r\n * @example\r\n * ```typescript\r\n * const validator = new RequiredValidator();\r\n * \r\n * // Text field validation\r\n * validator.validate(\"hello\", { type: \"required\" }); // { valid: true }\r\n * validator.validate(\"\", { type: \"required\" }); // { valid: false, message: \"This field is required.\" }\r\n * \r\n * // Array validation (checkbox groups, multi-select)\r\n * validator.validate([\"option1\", \"option2\"], { type: \"required\" }); // { valid: true }\r\n * validator.validate([], { type: \"required\" }); // { valid: false, message: \"This field is required.\" }\r\n * \r\n * // Boolean validation (single checkbox)\r\n * validator.validate(true, { type: \"required\" }); // { valid: true }\r\n * validator.validate(false, { type: \"required\" }); // { valid: false, message: \"This field is required.\" }\r\n * ```\r\n */\r\nexport class RequiredValidator implements IValidator {\r\n  /** Validator name/type identifier */\r\n  name = \"required\";\r\n\r\n  /**\r\n   * Validates that a field has a value and is not empty\r\n   * \r\n   * @param value - The value to validate. Can be any type including arrays and booleans\r\n   * @param rule - The validation rule descriptor containing configuration\r\n   * @returns ValidationResult indicating whether the field is valid\r\n   * \r\n   * @remarks\r\n   * This validator uses different logic based on the value type:\r\n   * - Arrays: Valid if length > 0\r\n   * - Booleans: Valid if true\r\n   * - Null/undefined: Always invalid\r\n   * - Other types: Valid if not empty string\r\n   * \r\n   * The validator provides appropriate error messages and can be customized\r\n   * through the rule.message property.\r\n   */\r\n  validate(value: any, rule: IRuleDescriptor): IValidationResult {\r\n    let valid: boolean;\r\n\r\n    // Handle different value types with appropriate validation logic\r\n    if (Array.isArray(value)) {\r\n      // Checkbox group or multi-select validation\r\n      // Valid if array has at least one element\r\n      valid = value.length > 0;\r\n    } else if (typeof value === \"boolean\") {\r\n      // Single checkbox validation\r\n      // Valid if checkbox is checked (true)\r\n      valid = value;\r\n    } else if (value === null || value === undefined) {\r\n      // Null/undefined values are always invalid\r\n      valid = false;\r\n    } else {\r\n      // String and other primitive types\r\n      // Valid if not empty string (handles whitespace-only strings as invalid)\r\n      valid = value !== \"\";\r\n    }\r\n\r\n    // Return validation result with appropriate message\r\n    return {\r\n      valid,\r\n      message: valid ? undefined : (rule.message || \"This field is required.\"),\r\n    };\r\n  }\r\n}\r\n\r\nexport default RequiredValidator;","import { IRuleDescriptor } from \"../Interfaces/IRuleDescriptor\";\r\nimport { IValidationResult } from \"../Interfaces/IValidationResult\";\r\nimport { IValidator } from \"../Interfaces/IValidator\";\r\n\r\n// Email\r\nexport class EmailValidator implements IValidator {\r\n    name = \"email\";\r\n    private emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$/;\r\n    validate(value: any, rule: IRuleDescriptor): IValidationResult {\r\n        const valid = typeof value === \"string\" && this.emailRegex.test(value);\r\n        return {\r\n            valid,\r\n            message: valid ? undefined : (rule.message || \"Invalid email address.\"),\r\n        };\r\n    }\r\n}\r\nexport default EmailValidator;","import { IRuleDescriptor } from \"../Interfaces/IRuleDescriptor\";\r\nimport { IValidationResult } from \"../Interfaces/IValidationResult\";\r\nimport { IValidator } from \"../Interfaces/IValidator\";\r\n\r\n// Min Length\r\nexport class MinLengthValidator implements IValidator {\r\n    name = \"minlength\";\r\n    validate(value: any, rule: IRuleDescriptor): IValidationResult {\r\n        const min = rule.value || 0;\r\n        const valid = typeof value === \"string\" && value.length >= min;\r\n        return {\r\n            valid,\r\n            message: valid ? undefined : (rule.message || `Minimum length is ${min}.`),\r\n        };\r\n    }\r\n}\r\n\r\n\r\nexport default MinLengthValidator;","import { IRuleDescriptor } from \"../Interfaces/IRuleDescriptor\";\r\nimport { IValidationResult } from \"../Interfaces/IValidationResult\";\r\nimport { IValidator } from \"../Interfaces/IValidator\";\r\n\r\n// Max Length\r\nexport class MaxLengthValidator implements IValidator {\r\n    name = \"maxlength\";\r\n    validate(value: any, rule: IRuleDescriptor): IValidationResult {\r\n        const max = rule.value || 0;\r\n        const valid = typeof value === \"string\" && value.length <= max;\r\n        return {\r\n            valid,\r\n            message: valid ? undefined : (rule.message || `Maximum length is ${max}.`),\r\n        };\r\n    }\r\n}\r\n\r\nexport default MaxLengthValidator;","import { IRuleDescriptor } from \"../Interfaces/IRuleDescriptor\";\r\nimport { IValidationResult } from \"../Interfaces/IValidationResult\";\r\nimport { IValidator } from \"../Interfaces/IValidator\";\r\n\r\n// Match (e.g. confirmPassword)\r\nexport class MatchValidator implements IValidator {\r\n    name = \"match\";\r\n    validate(value: any, rule: IRuleDescriptor, allValues?: Record<string, any>): IValidationResult {\r\n        // Prefer matchField, then value\r\n        const otherField = (rule as any).matchField || rule.value;\r\n        console.log(\"MatchValidator allValues:\", allValues, \"otherField:\", otherField, \"allValues[otherField]:\", allValues ? allValues[otherField] : undefined);\r\n        if (!otherField) {\r\n            return {\r\n                valid: false,\r\n                message: rule.message || \"No field to match specified.\"\r\n            };\r\n        }\r\n        if (!allValues || !(otherField in allValues)) {\r\n            return {\r\n                valid: false,\r\n                message: rule.message || `Field to match (${otherField}) not found.`\r\n            };\r\n        }\r\n        const valid = value === allValues[otherField];\r\n        return {\r\n            valid,\r\n            message: valid ? undefined : (rule.message || \"Values do not match.\"),\r\n        };\r\n    }\r\n}\r\nexport default MatchValidator;","import { inject, injectable } from \"inversify\";\r\nimport { IAsyncValidator } from \"../Interfaces/IAsyncValidator\";\r\nimport { IValidationResult } from \"../Interfaces/IValidationResult\";\r\nimport ContainerTypes from \"../DI/ContainerTypes\";\r\n\r\n\r\nimport { IRuleDescriptor } from \"../Interfaces/IRuleDescriptor\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { IWebSocketTransport } from \"../../MessageBroker/Interfaces/IWebSocketTransport\";\r\nimport { IMessage } from \"../../MessageBroker/Interfaces/IMessage\";\r\nimport { IHttpClientFactory } from \"../../MessageBroker/Interfaces/IHttpClientFactory\";\r\n\r\n\r\n\r\n\r\n@injectable()\r\n\r\nexport class RemoteValidator implements IAsyncValidator {\r\n  name = \"remote\";\r\n\r\n  constructor(\r\n    @inject(ContainerTypes.HttpClientFactory)\r\n    private httpClientFactory: IHttpClientFactory,\r\n\r\n    @inject(ContainerTypes.WebSocketTransportProvider)\r\n    private webSocketTransportProvider: IWebSocketTransport\r\n  ) {}\r\n\r\n  async validate(\r\n    value: any,\r\n    rule: IRuleDescriptor,\r\n    allValues?: Record<string, any>\r\n  ): Promise<IValidationResult> {\r\n    // --- WebSocket Path ---\r\n    if (rule.provider === \"WebSocket\") {\r\n      const ws = this.webSocketTransportProvider;\r\n      if (!ws)\r\n        return { valid: false, isValid: false, errorMessage: \"WebSocket provider missing.\" };\r\n      if (!rule.endpoint)\r\n        return { valid: false, isValid: false, errorMessage: \"No endpoint specified.\" };\r\n      if (ws.readyState !== WebSocket.OPEN)\r\n        return { valid: false, isValid: false, errorMessage: \"WebSocket not connected.\" };\r\n\r\n      const msg: IMessage = {\r\n        type: \"RemoteValidationRequest\",\r\n        id: uuidv4(),\r\n        payload: {\r\n          endpoint: rule.endpoint,\r\n          data: { value, allValues },\r\n        },\r\n        _remote: false\r\n      };\r\n\r\n      try {\r\n        const response = await ws.sendRequest<{ valid: boolean; message?: string }>(msg);\r\n\r\n        // Defensive: handle any weird response shapes\r\n        if (typeof response.valid !== \"boolean\") {\r\n          return {\r\n            valid: false,\r\n            isValid: false,\r\n            errorMessage: \"Invalid response from remote validator.\",\r\n          };\r\n        }\r\n\r\n        return {\r\n          valid: !!response.valid,\r\n          isValid: !!response.valid,\r\n          errorMessage: response.message ?? (response.valid ? \"\" : \"Remote validation failed.\"),\r\n        };\r\n      } catch (error: any) {\r\n        return {\r\n          valid: false,\r\n          isValid: false,\r\n          errorMessage:\r\n            error?.message ??\r\n            (typeof error === \"string\" ? error : \"Error during WebSocket validation.\"),\r\n        };\r\n      }\r\n    }\r\n\r\n    // --- HTTP fallback path ---\r\n    const httpClient = this.httpClientFactory.create();\r\n    if (!rule.endpoint)\r\n      return { valid: false, isValid: false, errorMessage: \"No endpoint specified.\" };\r\n\r\n    try {\r\n      const response = await httpClient.post<{ valid: boolean; message?: string }>(\r\n        rule.endpoint,\r\n        { value, allValues }\r\n      );\r\n      return {\r\n        valid: !!response.valid,\r\n        isValid: !!response.valid,\r\n        errorMessage: response.message ?? (response.valid ? \"\" : \"Remote validation failed.\"),\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        valid: false,\r\n        isValid: false,\r\n        errorMessage:\r\n          error?.message ?? (typeof error === \"string\" ? error : \"HTTP error during validation.\"),\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n","/**\r\n * FormValidation Debugging Utility\r\n * \r\n * Helps identify and troubleshoot form validation issues\r\n */\r\nexport class FormDebugger {\r\n  private static instance: FormDebugger;\r\n\r\n  private constructor() {}\r\n\r\n  /**\r\n   * Get singleton instance\r\n   */\r\n  public static getInstance(): FormDebugger {\r\n    if (!FormDebugger.instance) {\r\n      FormDebugger.instance = new FormDebugger();\r\n    }\r\n    return FormDebugger.instance;\r\n  }\r\n\r\n  /**\r\n   * Debug form detection and binding\r\n   */\r\n  public debugFormDetection(): void {\r\n    console.log('🔍 [FormDebugger] Starting form detection debug...');\r\n    \r\n    // Check for forms with validate=\"true\"\r\n    const validateForms = Array.from(document.querySelectorAll<HTMLFormElement>('form[validate=\"true\"]'));\r\n    console.log(`📋 [FormDebugger] Found ${validateForms.length} forms with validate=\"true\":`, validateForms.map(f => ({ id: f.id, name: f.name })));\r\n    \r\n    // Check for forms with data-rule attributes\r\n    const allForms = Array.from(document.querySelectorAll<HTMLFormElement>('form'));\r\n    const formsWithRules = allForms.filter(form => {\r\n      const fieldsWithRules = Array.from(form.elements).filter(el => \r\n        el instanceof HTMLElement && \r\n        Array.from(el.attributes).some(attr => attr.name.startsWith('data-rule-'))\r\n      );\r\n      return fieldsWithRules.length > 0;\r\n    });\r\n    \r\n    console.log(`📋 [FormDebugger] Found ${formsWithRules.length} forms with validation rules:`, formsWithRules.map(f => ({ id: f.id, name: f.name })));\r\n    \r\n    // Debug each form\r\n    allForms.forEach((form, index) => {\r\n      console.log(`\\n📝 [FormDebugger] Form ${index + 1}:`, {\r\n        id: form.id,\r\n        name: form.name,\r\n        action: form.action,\r\n        method: form.method,\r\n        hasValidateAttr: form.hasAttribute('validate'),\r\n        validateValue: form.getAttribute('validate'),\r\n        fields: this.getFormFieldsInfo(form)\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Debug form fields and their validation rules\r\n   */\r\n  public debugFormFields(formId?: string): void {\r\n    const forms = formId \r\n      ? [document.getElementById(formId) as HTMLFormElement].filter(Boolean)\r\n      : Array.from(document.querySelectorAll<HTMLFormElement>('form'));\r\n\r\n    forms.forEach(form => {\r\n      console.log(`\\n🔍 [FormDebugger] Debugging form: ${form.id || 'unnamed'}`);\r\n      \r\n      const fields = Array.from(form.elements).filter(\r\n        el => el instanceof HTMLInputElement || \r\n              el instanceof HTMLSelectElement || \r\n              el instanceof HTMLTextAreaElement\r\n      ) as (HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement)[];\r\n\r\n      fields.forEach(field => {\r\n        const rules = this.extractFieldRules(field);\r\n        console.log(`  📄 Field: ${field.name} (${field.type})`, {\r\n          value: field.value,\r\n          rules: rules,\r\n          hasRules: rules.length > 0,\r\n          required: field.hasAttribute('required'),\r\n          disabled: field.disabled,\r\n          hidden: field.type === 'hidden'\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Debug validation registry\r\n   */\r\n  public debugValidationRegistry(registry: any): void {\r\n    console.log('🔧 [FormDebugger] Validation Registry Debug:');\r\n    \r\n    if (registry && typeof registry.listValidators === 'function') {\r\n      const validators = registry.listValidators();\r\n      console.log(`  📋 Registered validators: ${validators.join(', ')}`);\r\n      \r\n      validators.forEach((validatorType: string) => {\r\n        const validator = registry.getValidator(validatorType);\r\n        console.log(`  ✅ ${validatorType}:`, {\r\n          name: validator?.name,\r\n          hasValidate: typeof validator?.validate === 'function',\r\n          type: typeof validator\r\n        });\r\n      });\r\n    } else {\r\n      console.log('  ❌ Registry not available or invalid');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Debug message broker\r\n   */\r\n  public debugMessageBroker(broker: any): void {\r\n    console.log('📡 [FormDebugger] Message Broker Debug:');\r\n    \r\n    if (broker && typeof broker.publish === 'function') {\r\n      console.log('  ✅ Message broker is available');\r\n      \r\n      // Test message publishing\r\n      try {\r\n        broker.publish({\r\n          type: 'DebugTest',\r\n          topic: 'debug',\r\n          payload: { test: true },\r\n          _remote: false\r\n        });\r\n        console.log('  ✅ Message publishing works');\r\n      } catch (error) {\r\n        console.log('  ❌ Message publishing failed:', error);\r\n      }\r\n    } else {\r\n      console.log('  ❌ Message broker not available or invalid');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test form submission manually\r\n   */\r\n  public testFormSubmission(formId: string): void {\r\n    const form = document.getElementById(formId) as HTMLFormElement;\r\n    if (!form) {\r\n      console.log(`❌ [FormDebugger] Form with id \"${formId}\" not found`);\r\n      return;\r\n    }\r\n\r\n    console.log(`🧪 [FormDebugger] Testing form submission for: ${formId}`);\r\n    \r\n    // Create a test submit event\r\n    const submitEvent = new Event('submit', { bubbles: true, cancelable: true });\r\n    \r\n    // Add event listener to capture the event\r\n    const originalAddEventListener = form.addEventListener;\r\n    form.addEventListener = function(type: string, listener: EventListener, options?: boolean | AddEventListenerOptions) {\r\n      if (type === 'submit') {\r\n        console.log('  📡 [FormDebugger] Submit event listener added');\r\n      }\r\n      return originalAddEventListener.call(this, type, listener, options);\r\n    };\r\n\r\n    // Dispatch the event\r\n    console.log('  🚀 [FormDebugger] Dispatching submit event...');\r\n    form.dispatchEvent(submitEvent);\r\n    \r\n    // Restore original addEventListener\r\n    form.addEventListener = originalAddEventListener;\r\n  }\r\n\r\n  /**\r\n   * Get comprehensive form information\r\n   */\r\n  public getFormInfo(formId: string): any {\r\n    const form = document.getElementById(formId) as HTMLFormElement;\r\n    if (!form) return null;\r\n\r\n    return {\r\n      id: form.id,\r\n      name: form.name,\r\n      action: form.action,\r\n      method: form.method,\r\n      hasValidateAttr: form.hasAttribute('validate'),\r\n      validateValue: form.getAttribute('validate'),\r\n      fields: this.getFormFieldsInfo(form),\r\n      eventListeners: this.getEventListenersInfo(form)\r\n    };\r\n  }\r\n\r\n  // ============================================================================\r\n  // PRIVATE METHODS\r\n  // ============================================================================\r\n\r\n  private getFormFieldsInfo(form: HTMLFormElement): any[] {\r\n    const fields = Array.from(form.elements).filter(\r\n      el => el instanceof HTMLInputElement || \r\n            el instanceof HTMLSelectElement || \r\n            el instanceof HTMLTextAreaElement\r\n    ) as (HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement)[];\r\n\r\n    return fields.map(field => ({\r\n      name: field.name,\r\n      type: field.type,\r\n      value: field.value,\r\n      rules: this.extractFieldRules(field),\r\n      required: field.hasAttribute('required'),\r\n      disabled: field.disabled,\r\n      hidden: field.type === 'hidden'\r\n    }));\r\n  }\r\n\r\n  private extractFieldRules(field: HTMLElement): any[] {\r\n    const rules: any[] = [];\r\n    \r\n    // Parse data-rule-* attributes\r\n    for (const attr of Array.from(field.attributes)) {\r\n      if (attr.name.startsWith('data-rule-')) {\r\n        const ruleType = attr.name.replace('data-rule-', '');\r\n        rules.push({\r\n          type: ruleType,\r\n          value: attr.value,\r\n          attribute: attr.name\r\n        });\r\n      }\r\n    }\r\n    \r\n    // Check HTML5 attributes\r\n    if (field.hasAttribute('required')) {\r\n      rules.push({ type: 'required', value: true, attribute: 'required' });\r\n    }\r\n    \r\n    if (field.hasAttribute('minlength')) {\r\n      rules.push({ \r\n        type: 'minlength', \r\n        value: field.getAttribute('minlength'), \r\n        attribute: 'minlength' \r\n      });\r\n    }\r\n    \r\n    if (field.hasAttribute('maxlength')) {\r\n      rules.push({ \r\n        type: 'maxlength', \r\n        value: field.getAttribute('maxlength'), \r\n        attribute: 'maxlength' \r\n      });\r\n    }\r\n    \r\n    if (field.hasAttribute('pattern')) {\r\n      rules.push({ \r\n        type: 'pattern', \r\n        value: field.getAttribute('pattern'), \r\n        attribute: 'pattern' \r\n      });\r\n    }\r\n    \r\n    return rules;\r\n  }\r\n\r\n  private getEventListenersInfo(form: HTMLFormElement): any {\r\n    // This is a simplified approach - in real browsers, you can't directly access event listeners\r\n    return {\r\n      hasSubmitListener: 'Cannot determine without browser dev tools',\r\n      note: 'Check browser dev tools > Elements > Event Listeners tab'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Global debugger instance\r\n */\r\nexport const formDebugger = FormDebugger.getInstance();\r\n\r\n/**\r\n * Debug helper functions\r\n */\r\nexport const debugHelpers = {\r\n  /**\r\n   * Quick debug for a specific form\r\n   */\r\n  debugForm: (formId: string) => {\r\n    console.log('🔍 [DebugHelper] Quick form debug:', formId);\r\n    const info = formDebugger.getFormInfo(formId);\r\n    console.log(info);\r\n  },\r\n\r\n  /**\r\n   * Test form submission\r\n   */\r\n  testSubmit: (formId: string) => {\r\n    formDebugger.testFormSubmission(formId);\r\n  },\r\n\r\n  /**\r\n   * Debug all forms\r\n   */\r\n  debugAll: () => {\r\n    formDebugger.debugFormDetection();\r\n    formDebugger.debugFormFields();\r\n  }\r\n};\r\n\r\n// Make debug helpers available globally for console access\r\nif (typeof window !== 'undefined') {\r\n  (window as any).formValidationDebug = debugHelpers;\r\n  console.log('🔧 [FormDebugger] Debug helpers available at window.formValidationDebug');\r\n  console.log('  Usage: formValidationDebug.debugForm(\"formId\")');\r\n  console.log('  Usage: formValidationDebug.testSubmit(\"formId\")');\r\n  console.log('  Usage: formValidationDebug.debugAll()');\r\n} ","import \"reflect-metadata\";\r\nimport { container } from \"../DI/container-config\";\r\nimport ContainerTypes from \"../DI/ContainerTypes\";\r\nimport { IMessageBroker } from \"../../MessageBroker/Interfaces/IMessageBroker\";\r\nimport { TransportProviderRegistry } from \"../../MessageBroker/Registries/TransportProviderRegistry\";\r\nimport { MessageBroker } from \"../../MessageBroker/MessageBroker\";\r\nimport { MessageFilterRegistry } from \"../../MessageBroker/Registries/MessageFilterRegistry\";\r\nimport { NotificationComponent } from \"../../MessageBroker/Components/NotificationComponent\";\r\nimport { InMemoryTransport } from \"../../MessageBroker/Transports/InMemoryTransport\";\r\nimport { ITransportProviderRegistry } from \"../../MessageBroker/Interfaces/ITransportProviderRegistry\";\r\nimport { WebSocketTransport } from \"../../MessageBroker/Transports/WebSocketTransport\";\r\nimport { HttpTransport } from \"../../MessageBroker/Transports/HttpTransport\";\r\nimport { logLiveSubscribersMiddleware } from \"../../MessageBroker/Middleware/logLiveSubscribersMiddleware\";\r\nimport { FormValidationMiddleware } from \"../Middleware/FormValidationMiddleware\";\r\nimport { UIBinder } from \"../Binders/UIBinder\";\r\nimport { IValidatorRegistry } from \"../Interfaces/IValidatorRegistry\";\r\nimport RequiredValidator from \"../Validators/RequiredFieldValidator\";\r\nimport { EmailValidator } from \"../Validators/EmailValidator\";\r\nimport MinLengthValidator from \"../Validators/MinLengthValidator\";\r\nimport { MaxLengthValidator } from \"../Validators/MaxLengthValidator\";\r\nimport MatchValidator from \"../Validators/MatchValidator\";\r\nimport { RemoteValidator } from \"../Validators/RemoteValidator\";\r\nimport { IHttpClientFactory } from \"../../MessageBroker/Interfaces/IHttpClientFactory\";\r\nimport { HttpClientFactory } from \"../../MessageBroker/Factory/HttpClientFactory\";\r\nimport { formDebugger } from \"../Utils/FormDebugger\";\r\n\r\n// ---- Initialization and Registry Setup ---- //\r\nconst broker = container.get<MessageBroker>(ContainerTypes.MessageBroker);\r\nconst transportRegistry = container.get<TransportProviderRegistry>(ContainerTypes.TransportProviderRegistry);\r\nconst formValidationMiddleware = container.get<FormValidationMiddleware>(ContainerTypes.FormValidationMiddleware);\r\nconst filterRegistry = container.get<MessageFilterRegistry>(ContainerTypes.MessageFilterRegistry);\r\nconst validatorRegistry = container.get<IValidatorRegistry>(ContainerTypes.ValidatorRegistry);\r\n\r\n// --- Transports ---\r\ntransportRegistry.register(\"memory\", new InMemoryTransport());\r\n// transportRegistry.register(\"ws\", new WebSocketTransport(\"wss://api.example.com/ws\"));\r\n// transportRegistry.register(\"http\", new HttpTransport(\"https://api.example.com\"));\r\nbroker.setProvider(transportRegistry.get(\"memory\")!);\r\n\r\n// --- Message Filters (example for notifications) ---\r\nfilterRegistry.register(\"NotificationComponent\", (msg) => msg.type === \"notification\");\r\n\r\n// --- Validators (register only once, keep types lower-case/consistent!) ---\r\nvalidatorRegistry.register(\"required\", new RequiredValidator());\r\nvalidatorRegistry.register(\"email\", new EmailValidator());\r\nvalidatorRegistry.register(\"minlength\", new MinLengthValidator()); // keep type lower-case for consistency\r\nvalidatorRegistry.register(\"maxlength\", new MaxLengthValidator());\r\nvalidatorRegistry.register(\"match\", new MatchValidator());\r\nvalidatorRegistry.register(\r\n  \"remote\",\r\n  new RemoteValidator(\r\n    container.get<IHttpClientFactory>(ContainerTypes.HttpClientFactory),\r\n    container.get<WebSocketTransport>(ContainerTypes.WebSocketTransportProvider)\r\n  )\r\n);\r\n\r\n// --- Broker middleware (logging etc) ---\r\nbroker.use(logLiveSubscribersMiddleware(broker, \"Form Events\"));\r\nbroker.use(formValidationMiddleware.middleware());\r\n\r\n// --- UI/validation binding ---\r\nformValidationMiddleware.attachToForms(); // Bind forms and handlers\r\nnew UIBinder(broker); // Listen for validation/status messages\r\n\r\n// --- Debug and diagnostics ---\r\nconsole.log('🔧 [FormValidation] System initialized successfully');\r\nformDebugger.debugFormDetection();\r\nformDebugger.debugValidationRegistry(validatorRegistry);\r\nformDebugger.debugMessageBroker(broker);\r\n\r\n// --- Optional: Test Notification ---\r\n// broker.publish({ _remote: false, type: \"notification\", payload: { message: \"Hello World\" } });\r\n"],"names":["Reflect","factory","root","global","sloppyModeThis","exporter","makeExporter","target","previous","key","value","functionThis","indirectEvalThis","hasOwn","supportsSymbol","toPrimitiveSymbol","iteratorSymbol","supportsCreate","supportsProto","downLevel","HashMap","MakeDictionary","map","functionPrototype","_Map","CreateMapPolyfill","_Set","CreateSetPolyfill","_WeakMap","CreateWeakMapPolyfill","registrySymbol","metadataRegistry","GetOrCreateMetadataRegistry","metadataProvider","CreateMetadataProvider","decorate","decorators","propertyKey","attributes","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","ToPropertyKey","DecorateProperty","metadata","metadataKey","metadataValue","decorator","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","getMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","provider","GetMetadataProvider","i","decorated","descriptor","MetadataKey","O","P","parent","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","set","keys","_i","ownKeys_1","hasKey","_a","parentKeys_1","Type","x","IsSymbol","ToPrimitive","input","PreferredType","hint","exoticToPrim","GetMethod","result","OrdinaryToPrimitive","valueOf","toString_2","toString_1","IsCallable","argument","ToString","SameValueZero","y","V","func","GetIterator","obj","method","iterator","IteratorValue","iterResult","IteratorStep","IteratorClose","f","proto","prototype","prototypeProto","constructor","CreateMetadataRegistry","fallback","CreateFallbackProvider","first","second","rest","targetProviderMap","registry","registerProvider","getProvider","setProvider","getProviderNoCache","next","providerMap","hasProvider","existingProvider","targetMetadata","OrdinaryDeleteMetadata","GetOrCreateMetadataMap","Create","createdTargetMetadata","metadataMap","keysObj","k","nextValue","e","reflect","metadataOwner","metadataPropertySet","registeredProvider","cacheSentinel","arraySentinel","MapIterator","values","selector","index","error","Map","size","getKey","getValue","getEntry","insert","_","Set","UUID_SIZE","rootKey","CreateUniqueKey","WeakMap","table","GetOrCreateWeakMapTable","CreateUUID","create","FillRandomBytes","buffer","GenRandomBytes","array","data","offset","byte","t","n","r","a","c","s","u","d","#n","#i","#o","#r","o","#a","l","p","g","#c","#u","m","#d","h","#l","M","I","w","b","j","T","C","S","A","$","B","R","D","F","N","E","U","K","oe","re","#p","ae","se","ce","ue","de","pe","fe","le","ge","me","he","we","ve","je","ye","Me","Ie","be","Te","Ce","#f","#g","#m","#h","#v","#y","#M","#I","#w","#b","Se","Ae","$e","xe","Be","Re","ke","Pe","De","Ve","Fe","Oe","Ne","Ee","Ue","Ke","qe","Xe","ze","We","Ge","He","Je","Le","Qe","Ye","Ze","_e","et","tt","nt","it","ot","rt","at","#t","#s","G","q","#S","v","#A","#P","#R","#B","#C","#N","#x","Subscriber","handler","filter","owner","MessageBroker","type","sub","topic","msg","timeout","subscriber","middleware","onceHandler","ms","errMsg","reject","idx","run","mw","err","delivered","promises","matches","handlerErr","raw","__decorateClass","injectable","ContainerTypes","TransportProviderRegistry","name","MessageFilterRegistry","FormValidationMiddleware","formEventBinder","forms","form","__decorateParam","RuleParser","fields","elements","processed","grouped","el","group","rules","seen","attr","ruleKey","matchField","remoteType","endpoint","Debouncer","delayMs","callback","FormEventBinder","broker","dispatcher","evt","formId","results","allValid","firstInvalid","observer","field","handlers","isRemote","debouncer","allValues","checkboxes","cb","checked","option","inject","ValidatorDispatcher","validatorRegistry","fieldType","formEl","fieldSchema","fieldEl","errors","rule","validator","res","context","schema","ruleType","param","minLength","maxLength","pattern","fieldResult","validationResult","element","fieldRules","ValidatorRegistry","HttpClient","config","init","req","interceptor","response","url","options","finalUrl","headers","interceptedRequestInfo","interceptedInit","handledResponse","ct","payload","HttpClientFactory","transport","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","arr","randomUUID","native","v4","buf","rnds","WebSocketTransport","uuidv4","topicOrType","start","text","resolve","timer","reply","reason","id","delay","container","Container","InMemoryTransport","requestMsg","replyPayload","pending","logLiveSubscribersMiddleware","label","subscribers","UIBinder","formName","level","baseField","message","RequiredValidator","valid","EmailValidator","MinLengthValidator","min","MaxLengthValidator","max","MatchValidator","otherField","RemoteValidator","httpClientFactory","webSocketTransportProvider","ws","httpClient","FormDebugger","validateForms","allForms","formsWithRules","validators","validatorType","submitEvent","originalAddEventListener","listener","formDebugger","debugHelpers","info","transportRegistry","formValidationMiddleware","filterRegistry"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,18,19,20,21]}